<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sulap Fitri - Ramadan & Lebaran AI</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/magicfitri.png">
    <link rel="manifest" href="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0f1c2e">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/css/style.css?v=1771491150">
</head>
<body>
<!-- Desktop Sidebar Navigation -->
<aside class="desktop-sidebar" id="desktop-sidebar">
    <div class="sidebar-logo">
        <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/magicfitri.png" alt="Sulap Fitri" class="sidebar-logo-img">
        <div class="sidebar-logo-text">
            <span class="sidebar-brand">Sulap Fitri</span>
            <span class="sidebar-pro-badge">PRO</span>
        </div>
    </div>
    <nav class="sidebar-nav">
        <!-- Utama -->
        <div class="sidebar-nav-label">Utama</div>
        <div class="sidebar-nav-item" onclick="openHome()" data-tooltip="Beranda" data-page="home">
            <i class="fas fa-house"></i>
            <span>Beranda</span>
        </div>
        <div class="sidebar-nav-item" onclick="openAssistantModal()" data-tooltip="SuFi AI" data-page="assistant-modal">
            <i class="fas fa-robot"></i>
            <span>SuFi AI</span>
        </div>
        <div class="sidebar-nav-item" onclick="openChatGroupModal()" data-tooltip="Chat Group" data-page="chat-group-modal">
            <i class="fas fa-comments"></i>
            <span>Chat Group</span>
        </div>
        <!-- Ibadah -->
        <div class="sidebar-nav-label">Ibadah</div>
        <div class="sidebar-nav-item" onclick="openQuranModal()" data-tooltip="Al-Quran" data-page="quran-modal">
            <i class="fas fa-quran"></i>
            <span>Al-Quran</span>
        </div>
        <div class="sidebar-nav-item" onclick="openSholatModal()" data-tooltip="Bacaan Sholat" data-page="sholat-modal">
            <i class="fas fa-pray"></i>
            <span>Bacaan Sholat</span>
        </div>
        <div class="sidebar-nav-item" onclick="openKiblatModal()" data-tooltip="Arah Kiblat" data-page="kiblat-modal">
            <i class="fas fa-compass"></i>
            <span>Arah Kiblat</span>
        </div>
        <!-- AI Magic Studio -->
        <div class="sidebar-nav-label">AI Magic Studio</div>
        <div class="sidebar-nav-item" onclick="openFotoRamadhanModal()" data-tooltip="Foto Ramadhan" data-page="fr-modal">
            <i class="fas fa-camera-retro"></i>
            <span>Foto Ramadhan</span>
        </div>
        <div class="sidebar-nav-item" onclick="openFotoUcapanPuasaModal()" data-tooltip="Ucapan Puasa" data-page="fup-modal">
            <i class="fas fa-image"></i>
            <span>Ucapan Puasa</span>
        </div>
        <div class="sidebar-nav-item" onclick="openFotoUcapanLebaranModal()" data-tooltip="Ucapan Lebaran" data-page="ful-modal">
            <i class="fas fa-gift"></i>
            <span>Ucapan Lebaran</span>
        </div>
        <div class="sidebar-nav-item" onclick="openFotoProdukRamadhanModal()" data-tooltip="Foto Produk" data-page="fpr-modal">
            <i class="fas fa-box-open"></i>
            <span>Foto Produk</span>
        </div>
        <div class="sidebar-nav-item" onclick="openFotoFashionRamadhanModal()" data-tooltip="Foto Fashion" data-page="ffr-modal">
            <i class="fas fa-tshirt"></i>
            <span>Foto Fashion</span>
        </div>
        <div class="sidebar-nav-item" onclick="openBusanaMuslimModal()" data-tooltip="Busana Muslim" data-page="bm-modal">
            <i class="fas fa-vest"></i>
            <span>Busana Muslim</span>
        </div>
        <div class="sidebar-nav-item" onclick="openAvatarMuslimModal()" data-tooltip="Sticker Muslim" data-page="am-modal">
            <i class="fas fa-user-circle"></i>
            <span>Sticker Muslim</span>
        </div>
        <div class="sidebar-nav-item" onclick="openQuoteIslamiModal()" data-tooltip="Quote Islami" data-page="qi-modal">
            <i class="fas fa-quote-right"></i>
            <span>Quote Islami</span>
        </div>
        <div class="sidebar-nav-item" onclick="openKaligrafiNamaModal()" data-tooltip="Kaligrafi Nama" data-page="kn-modal">
            <i class="fas fa-pen-fancy"></i>
            <span>Kaligrafi Nama</span>
        </div>
        <!-- Inspirasi -->
        <div class="sidebar-nav-label">Inspirasi</div>
        <div class="sidebar-nav-item" onclick="openChefRamadhanModal()" data-tooltip="Chef Ramadhan" data-page="chef-modal">
            <i class="fas fa-utensils"></i>
            <span>Chef Ramadhan</span>
        </div>
        <div class="sidebar-nav-item" onclick="openStoryPosterModal()" data-tooltip="Cerita Poster" data-page="story-modal">
            <i class="fas fa-book-open"></i>
            <span>Cerita Poster</span>
        </div>
        <!-- Semua Fitur -->
        <div class="sidebar-nav-divider"></div>
        <div class="sidebar-nav-item" onclick="openAllFeaturesModal()" data-tooltip="Semua Fitur" data-page="all-features-modal">
            <i class="fas fa-th-large"></i>
            <span>Semua Fitur</span>
        </div>
        <div class="sidebar-nav-item hidden" onclick="window.open('https://ichsanlabs.com/aff-sulapfitri', '_blank', 'noopener')" data-tooltip="Affiliasi 50%">
            <i class="fas fa-hand-holding-dollar"></i>
            <span>Affiliasi 50%</span>
        </div>
    </nav>
    <div class="sidebar-footer">
        <span>© 2026 It's Me</span>
    </div>
</aside>
<!-- Splash Screen -->
<div id="splash">
    <div class="splash-content">
        <h1 class="splash-title">Ramadan Kareem</h1>
        <p class="splash-desc">
            Tetap terhubung dengan keberkahan.<br>
            Aplikasi pintar untuk menemani ibadah dan momen spesial Anda. </p>
        <form id="verification-form" class="verify-form">
            <div class="verify-input-wrap">
                <i class="fas fa-envelope"></i>
                <input type="email" id="verification-email" placeholder="Email pembelian" required>
            </div>
            <div id="verification-message" class="verify-message hidden"></div>
            <button type="submit" id="verification-btn" class="verify-btn">
                <span>Verifikasi Akses</span>
                <i class="fas fa-arrow-right"></i>
            </button>
        </form>
        <button class="btn-start" onclick="enterApp()">
            <i class="fas fa-arrow-right"></i>
        </button>
    </div>
</div>
<!-- Main App -->
<div id="app">
    <header>
        <div class="user-info">
            <h2 id="user-greeting">Assalamualaikum,</h2>
            <h1 id="user-email-display">—</h1>
        </div>
        <button class="icon-btn" id="btn-logout" type="button" title="Goto Website">
            <i class="fas fa-sign-out-alt"></i>
        </button>
    </header>
    <!-- Iftar Countdown -->
    <div class="hero-card">
        <div class="timer-header">
            <span class="timer-badge">Maghrib Mendatang</span>
            <i class="fas fa-mosque" style="opacity: 0.5;"></i>
        </div>
        <div class="countdown" id="countdown-timer">04:32:15</div>
        <div style="font-size: 0.8rem; opacity: 0.8; text-align: center;">Menuju Berbuka Puasa ~ <span id="prayer-maghrib">18:10:00</span></div>
        <div class="online-info-card hidden">
            <div class="online-info-header">
                <div class="online-info-title">
                    <i class="fas fa-users"></i>
                    <span>Pengguna Online</span>
                </div>
                <div class="online-info-indicator">
                    <span class="online-info-dot"></span>
                    <span id="online-info-count">0</span> online
                </div>
                <button class="online-info-btn" id="online-info-btn" type="button" title="Lihat pengguna online">
                    <i class="fas fa-eye"></i>
                </button>
            </div>
            <div id="online-info-list" class="online-info-list hidden"></div>
        </div>
    </div>
    <div id="systeminfo-card" class="systeminfo-card">
        <div class="systeminfo-header">
            <div class="systeminfo-title">
                    <span class="systeminfo-icon">
                        <i class="fas fa-server"></i>
                    </span>
                <div>
                    <h2>Status Server Sulap Fitri</h2>
                    <div id="systeminfo-total-label" class="systeminfo-total-label">Total: 0 Gambar Dihasilkan</div>
                </div>
            </div>
            <div id="systeminfo-status" class="systeminfo-overall">Memuat</div>
        </div>
        <div class="systeminfo-body">
            <div id="systeminfo-grid" class="systeminfo-grid"></div>
        </div>
    </div>
    <!-- Prayer Times Preview -->
    <div class="prayer-section-wrapper">
        <div class="section-header">
            <h3 class="section-title">Jadwal Sholat</h3>
            <a href="#" class="see-all" onclick="openPrayerModal(event)">Lihat Semua</a>
        </div>
        <div id="prayer-location-preview" style="font-size:0.8rem; color:var(--text-muted); margin-bottom:0.6rem;">Lokasi: Mendeteksi...</div>
        <div class="features-scroll">
            <div class="feature-card" style="background: linear-gradient(to bottom right, #2c3e50, #4ca1af);">
                <div class="feature-icon"><i class="fas fa-bullhorn"></i></div>
                <div>
                    <div class="feature-name">Imsak</div>
                    <div class="feature-desc" id="prayer-imsak-preview" style="color: rgba(255,255,255,0.9);">--:--</div>
                </div>
            </div>
            <div class="feature-card" style="background: linear-gradient(to bottom right, #2c3e50, #3498db);">
                <div class="feature-icon"><i class="fas fa-mosque"></i></div>
                <div>
                    <div class="feature-name">Subuh</div>
                    <div class="feature-desc" id="prayer-subuh-preview" style="color: rgba(255,255,255,0.9);">--:--</div>
                </div>
            </div>
            <div class="feature-card" style="background: linear-gradient(to bottom right, #ff9966, #ff5e62);">
                <div class="feature-icon"><i class="fas fa-sun"></i></div>
                <div>
                    <div class="feature-name">Terbit</div>
                    <div class="feature-desc" id="prayer-terbit-preview" style="color: rgba(255,255,255,0.9);">--:--</div>
                </div>
            </div>
            <div class="feature-card" style="background: linear-gradient(to bottom right, #f6d365, #fda085);">
                <div class="feature-icon"><i class="fas fa-cloud-sun"></i></div>
                <div>
                    <div class="feature-name">Dhuha</div>
                    <div class="feature-desc" id="prayer-dhuha-preview" style="color: rgba(255,255,255,0.9);">--:--</div>
                </div>
            </div>
            <div class="feature-card" style="background: linear-gradient(to bottom right, #e67e22, #f39c12);">
                <div class="feature-icon"><i class="fas fa-sun"></i></div>
                <div>
                    <div class="feature-name">Dzuhur</div>
                    <div class="feature-desc" id="prayer-dzuhur-preview" style="color: rgba(255,255,255,0.9);">--:--</div>
                </div>
            </div>
            <div class="feature-card" style="background: linear-gradient(to bottom right, #d38312, #a83279);">
                <div class="feature-icon"><i class="fas fa-cloud-sun"></i></div>
                <div>
                    <div class="feature-name">Ashar</div>
                    <div class="feature-desc" id="prayer-ashar-preview" style="color: rgba(255,255,255,0.9);">--:--</div>
                </div>
            </div>
            <div class="feature-card" style="background: linear-gradient(to bottom right, #8e44ad, #9b59b6);">
                <div class="feature-icon"><i class="fas fa-moon"></i></div>
                <div>
                    <div class="feature-name">Maghrib</div>
                    <div class="feature-desc" id="prayer-maghrib-preview" style="color: rgba(255,255,255,0.9);">--:--</div>
                </div>
            </div>
            <div class="feature-card" style="background: linear-gradient(to bottom right, #141e30, #243b55);">
                <div class="feature-icon"><i class="fas fa-star-and-crescent"></i></div>
                <div>
                    <div class="feature-name">Isya</div>
                    <div class="feature-desc" id="prayer-isya-preview" style="color: rgba(255,255,255,0.9);">--:--</div>
                </div>
            </div>
        </div>
    </div>
    <!-- AI Magic Studio -->
    <div class="magic-studio-wrapper">
        <div class="section-header">
            <h3 class="section-title">AI Magic Studio</h3>
            <span style="font-size:0.7rem; background:#fbbf24; color:#000; padding:2px 6px; border-radius:4px;">PRO</span>
        </div>
        <div class="magic-section">
            <div class="magic-card" onclick="openAssistantModal()">
                <div class="magic-thumb" style="color:#00d2d3;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/sufi-assistant-icon.jpg" alt="SuFi Assistant" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>SuFi Assistant</h3>
                    <p>Tanya apapun, bikin gambar, dan edit foto dibantu AI pintar</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
            <div class="magic-card" onclick="openFotoRamadhanModal()">
                <div class="magic-thumb" style="color:#00fa9a;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-ramadhan-icon.jpg" alt="Foto Ramadhan" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Foto Ramadhan</h3>
                    <p>Ubah foto biasa menjadi suasana ramadhan yang meriah.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
            <div class="magic-card" onclick="openFotoUcapanPuasaModal()">
                <div class="magic-thumb" style="color:#00bfff;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-ucapan-awal-puasa-icon.jpg" alt="Foto Ucapan Awal Puasa" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Foto Ucapan Awal Puasa</h3>
                    <p>Sambut Ramadhan dengan poster diri yang keren.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
            <div class="magic-card" onclick="openFotoUcapanLebaranModal()">
                <div class="magic-thumb" style="color:#ffd700;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-ucapan-lebaran-icon.jpg" alt="Foto Ucapan Lebaran" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Foto Ucapan Lebaran</h3>
                    <p>Buat kartu ucapan lebaran dengan foto keluarga otomatis.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
            <div class="magic-card" onclick="openFotoProdukRamadhanModal()">
                <div class="magic-thumb" style="color:#ff6b6b;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-produk-ramadhan-icon.jpg" alt="Foto Produk Ramadhan" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Foto Produk Ramadhan</h3>
                    <p>Ubah foto produk menjadi katalog ramadhan profesional.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
            <div class="magic-card" onclick="openFotoFashionRamadhanModal()">
                <div class="magic-thumb" style="color:#e056fd;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-fashion-ramadhan-icon.jpg" alt="Foto Fashion Ramadhan" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Foto Fashion Ramadhan</h3>
                    <p>Katalog fashion model AI & Manekin otomatis.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
            <div class="magic-card" onclick="openBusanaMuslimModal()">
                <div class="magic-thumb" style="color:#a55eea;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/busana-muslim-icon.jpg" alt="Pakai Busana Muslim" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Pakai Busana Muslim</h3>
                    <p>Ganti outfit fotomu dengan koleksi busana muslim.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
            <div class="magic-card" onclick="openAvatarMuslimModal()">
                <div class="magic-thumb" style="color:#2ecc71;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/sticker-muslim-icon.jpg" alt="Sticker Muslim" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Sticker Muslim</h3>
                    <p>Buat stiker unikmu dengan berbagai gaya.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
            <div class="magic-card" onclick="openQuoteIslamiModal()">
                <div class="magic-thumb" style="color:#1abc9c;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/quote-islami-icon.jpg" alt="Template Quote Islami" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Template Quote Islami</h3>
                    <p>Ayat & hadits jadi desain visual estetik otomatis.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
            <div class="magic-card" onclick="openKaligrafiNamaModal()">
                <div class="magic-thumb" style="color:#f1c40f;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/kaligrafi-nama-icon.jpg" alt="Kaligrafi Nama" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Kaligrafi Nama</h3>
                    <p>Ubah namamu menjadi seni kaligrafi Arab yang indah.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
        </div>
    </div>
    <div class="magic-studio-wrapper">
        <div class="section-header">
            <h3 class="section-title">Inspirasi & Hiburan</h3>
        </div>
        <div class="magic-section">
            <div class="magic-card" onclick="openChefRamadhanModal()">
                <div class="magic-thumb" style="color:#ffb347;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/chef-ramadhan-icon.jpg" alt="Chef Ramadhan" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Chef Ramadhan</h3>
                    <p>Foto isi kulkas atau tulis bahan, AI beri resep lengkap plus gambar masakan.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
            <div class="magic-card" onclick="openStoryPosterModal()">
                <div class="magic-thumb" style="color:#7bed9f;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/cerita-poster-ramadhan-icon.jpg" alt="Cerita Poster Ramadhan" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Cerita Poster Ramadhan</h3>
                    <p>Ubah ide sederhana jadi kisah singkat + poster visual yang estetik.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
        </div>
    </div>
    <div class="magic-studio-wrapper">
        <div class="section-header">
            <h3 class="section-title">Nyari Pahala</h3>
        </div>
        <div class="magic-section">
            <div class="magic-card" onclick="openQuranModal()">
                <div class="magic-thumb" style="color:#34ace0;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/baca-alquran-icon.jpg" alt="Baca Al-Quran" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Baca Al-Quran</h3>
                    <p>Pilih surah favorit, akses cepat, dan lanjutkan tilawah.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
            <div class="magic-card" onclick="openSholatModal()">
                <div class="magic-thumb" style="color:#2ecc71;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/cara-sholat-icon.jpg" alt="Cara Sholat" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Cara Sholat</h3>
                    <p>Panduan visual tata cara sholat lengkap dengan gerakan.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
            <div class="magic-card" onclick="openKiblatModal()">
                <div class="magic-thumb" style="color:#f1c40f;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/arah-kiblat-icon.jpg" alt="Arah Kiblat" style="width:100%; height:100%; border-radius:12px; object-fit:cover;">
                </div>
                <div class="magic-info">
                    <h3>Arah Kiblat</h3>
                    <p>Temukan arah kiblat akurat dengan kompas digital.</p>
                </div>
                <i class="fas fa-chevron-right" style="margin-left:auto; opacity:0.5;"></i>
            </div>
        </div>
    </div>
    <div class="app-footer" style="text-align:center; margin: 1rem auto 6rem; color: var(--text-muted); font-size: 0.65rem;">
        <span>© 2026. Sulap Fitri versi 1.1</span>
        <span style="margin-left:8px; background:#fbbf24; color:#000; padding:2px 6px; border-radius:6px; font-weight:700; font-size:0.65rem;">PRO</span>
        <span style="margin-left:8px;">By It's Me</span>
    </div>
</div>
<!-- Bottom Nav -->
<nav class="bottom-nav">
    <div class="nav-item active" onclick="openChatGroupModal()"><i class="fas fa-comments"></i></div>
    <div class="nav-item" onclick="openQuranModal()"><i class="fas fa-quran"></i></div>
    <div class="nav-center" onclick="openAssistantModal()"><i class="fas fa-robot"></i></div>
    <div class="nav-item" onclick="openAllFeaturesModal()"><i class="fas fa-compass"></i></div>
    <div class="nav-item" onclick="openProfileModal()"><i class="fas fa-dollar-sign"></i></div>
</nav>
<!-- Foto Ramadhan Modal -->
<div id="fr-modal" class="feature-page hidden">
    <div class="modal-content">
        <button class="close-modal" onclick="closeFotoRamadhanModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div style="text-align:center; margin-bottom:1.5rem;">
            <div style="width:60px; height:60px; background:var(--accent-green); border-radius:15px; display:inline-flex; align-items:center; justify-content:center; font-size:1.5rem; margin-bottom:1rem;">
                <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-ramadhan-icon.jpg" alt="Foto Ramadhan" style="width:100%; height:100%; border-radius:15px; object-fit:cover;">
            </div>
            <h2 id="fr-modal-title">Foto Ramadhan</h2>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-top:0.5rem;">Ubah foto biasa menjadi suasana ramadhan yang meriah.</p>
            <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/612ac186-cef4-4716-937e-7c8b91cc1060">
                <i class="fas fa-play-circle"></i>
                <span>Tonton Tutorial</span>
            </button>
        </div>
        <div class="feature-grid-wrapper">
            <div id="fr-input-section">
                <div class="drag-area" id="fr-drag-area">
                    <i class="fas fa-cloud-upload-alt" style="font-size:2rem; margin-bottom:1rem; color:var(--text-muted);"></i>
                    <p id="fr-upload-text">Klik untuk upload foto (Maks 5)</p>
                    <input type="file" id="fr-file-upload" accept="image/*" multiple hidden>
                    <div id="fr-upload-preview" style="display:none; width:100%; margin-top:0.75rem;"></div>
                </div>
                <div style="margin-top:auto;">
                    <!-- Message Section Removed for Foto Ramadhan -->
                    <div id="fr-controls-section" style="margin-bottom: 1rem; background: rgba(255, 255, 255, 0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                        <!-- Theme Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Pilih Tema Foto</label>
                            <select id="fr-theme-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="Buka Puasa Keluarga">Buka Puasa Keluarga</option>
                                <option value="Sahur Seru Rumah">Sahur Seru Rumah</option>
                                <option value="Ngabuburit Pasar Takjil">Ngabuburit Pasar Takjil</option>
                                <option value="Tarawih Malam Masjid">Tarawih Malam Masjid</option>
                                <option value="Sudut Ibadah Hangat">Sudut Ibadah Hangat</option>
                                <option value="Outfit Muslim Modern">Outfit Muslim Modern</option>
                                <option value="Ramadhan Minimalist Pastel">Ramadhan Minimalist Pastel</option>
                                <option value="Ketupat Nuansa Nusantara">Ketupat Nuansa Nusantara</option>
                                <option value="Kebersamaan Ramadhan Rumah">Kebersamaan Ramadhan Rumah</option>
                                <option value="Night Market Cinematic">Night Market Cinematic</option>
                                <option value="custom">Kustom (Tulis Sendiri)</option>
                            </select>
                            <input type="text" id="fr-theme-custom" class="hidden" placeholder="Deskripsikan tema..." style="width: 100%; margin-top: 5px; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                        </div>
                        <!-- Style Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Pilih Style Foto</label>
                            <select id="fr-bg-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="Normal">Normal</option>
                                <option value="Cyberpunk City Ramadhan">Cyberpunk City</option>
                                <option value="Anime Style Lebaran">Anime Style</option>
                                <option value="Watercolor Painting">Lukisan Cat Air</option>
                                <option value="3D Pixar Style Character">3D Pixar Style</option>
                                <option value="Retro Vintage 90s">Retro 90s</option>
                                <option value="Neon Light Portrait">Neon Portrait</option>
                                <option value="custom">Kustom (Tulis Sendiri)</option>
                            </select>
                            <input type="text" id="fr-bg-custom" class="hidden" placeholder="Deskripsikan tema..." style="width: 100%; margin-top: 5px; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                        </div>
                        <!-- Ratio Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Rasio Gambar</label>
                            <select id="fr-ratio-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="auto">Auto (Ikuti Gambar Asli)</option>
                                <option value="1:1">Square (1:1)</option>
                                <option value="9:16">Story / TikTok (9:16)</option>
                                <option value="16:9">Landscape / YT (16:9)</option>
                                <option value="3:4">Portrait (3:4)</option>
                                <option value="4:3">Landscape (4:3)</option>
                            </select>
                        </div>
                        <!-- Slider Jumlah -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Jumlah Variasi: <span id="fr-count-val" style="color: var(--accent-gold);">1</span></label>
                            <input type="range" id="fr-result-count" min="1" max="10" value="1" style="width: 100%; accent-color: var(--accent-green);">
                        </div>
                    </div>
                    <button id="fr-btn-generate" class="btn-generate">
                        <i class="fas fa-wand-magic-sparkles" style="margin-right:8px;"></i> Buat Sekarang
                    </button>
                </div>
            </div> <!-- End of input-section -->
            <!-- Output Area (Loading & Result) -->
            <div id="fr-output-area">
                <!-- Loading State -->
                <div id="fr-loading-state" class="hidden" style="text-align:center; padding:1rem 0; height: 100%; display: flex; flex-direction: column; justify-content: center;">
                    <div style="font-size:2rem; color:var(--accent-green); margin-bottom:0.5rem;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <p style="color:var(--text-muted); font-size:0.9rem;">AI sedang bekerja... Mohon tunggu.</p>
                </div>
                <!-- Result Card -->
                <div id="fr-result-card" style="position: relative; z-index: 20; background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); height: 100%; display: flex; flex-direction: column;">
                    <h3 style="font-size:1rem; margin-bottom:1rem; flex-shrink: 0;">Hasil Karya AI:</h3>
                    <div id="fr-result-content" style="border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.2); flex: 1; display: flex; align-items: center; justify-content: center; min-height: 0;">
                        <!-- Empty State Text if no image -->
                        <p class="empty-state-text" style="color: var(--text-muted); text-align: center; padding: 1rem; font-size: 0.9rem;">
                            <i class="fas fa-image" style="font-size: 2rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
                            Hasil foto akan muncul di sini. </p>
                    </div>
                    <div style="text-align: right; margin-top: 0.5rem; flex-shrink: 0;">
                        <small style="color: var(--text-muted);">Tekan tahan gambar untuk menyimpan</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Foto Ucapan Awal Puasa Modal -->
<div id="fup-modal" class="feature-page hidden">
    <div class="modal-content">
        <button class="close-modal" onclick="closeFotoUcapanPuasaModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div style="text-align:center; margin-bottom:1.5rem;">
            <div style="width:60px; height:60px; background:var(--accent-green); border-radius:15px; display:inline-flex; align-items:center; justify-content:center; font-size:1.5rem; margin-bottom:1rem;">
                <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-ucapan-awal-puasa-icon.jpg" alt="Foto Ucapan Awal Puasa" style="width:100%; height:100%; border-radius:15px; object-fit:cover;">
            </div>
            <h2 id="fup-modal-title">Foto Ucapan Awal Puasa</h2>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-top:0.5rem;">Sambut Ramadhan dengan poster diri yang keren.</p>
            <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/4ad89d42-b546-4bce-a6b4-b15b439fb2e7">
                <i class="fas fa-play-circle"></i>
                <span>Tonton Tutorial</span>
            </button>
        </div>
        <div class="feature-grid-wrapper">
            <div id="fup-input-section">
                <div class="drag-area" id="fup-drag-area">
                    <i class="fas fa-cloud-upload-alt" style="font-size:2rem; margin-bottom:1rem; color:var(--text-muted);"></i>
                    <p id="fup-upload-text">Klik untuk upload foto (Maks 5)</p>
                    <input type="file" id="fup-file-upload" accept="image/*" multiple hidden>
                    <div id="fup-upload-preview" style="display:none; width:100%; margin-top:0.75rem;"></div>
                </div>
                <div style="margin-top:auto;">
                    <!-- Message Section -->
                    <div id="fup-msg-section-wrapper">
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem;">
                            <label style="font-size:0.9rem; display:block;">Pesan Ucapan <span style="color:#ff6b6b">*</span></label>
                            <button id="fup-btn-auto-msg" style="background:var(--accent-gold); color:var(--primary-dark); border:none; padding:4px 8px; border-radius:6px; font-size:0.7rem; font-weight:600; cursor:pointer; display:flex; align-items:center; gap:4px;">
                                <i class="fas fa-bolt"></i> Buat Otomatis
                            </button>
                        </div>
                        <textarea id="fup-pesan-input" style="width:100%; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:10px; padding:10px; color:white; margin-bottom:1rem;" rows="3" placeholder="Tulis ucapan puasa..."></textarea>
                    </div>
                    <div id="fup-controls-section" style="margin-bottom: 1rem; background: rgba(255, 255, 255, 0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                        <!-- Background Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Background Nuansa</label>
                            <select id="fup-bg-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="Pemandangan Gurun Senja">Gurun Senja</option>
                                <option value="Langit Malam Penuh Bintang">Langit Malam</option>
                                <option value="Awan Putih Cerah">Awan Cerah</option>
                                <option value="Minimalis Putih Elegan">Minimalis Putih</option>
                                <option value="Abstrak Geometris Emas">Abstrak Emas</option>
                                <option value="Masjid Siluet Senja">Masjid Siluet</option>
                                <option value="Lampu Lentera Ramadhan">Lampu Lentera</option>
                                <option value="Interior Rumah Hangat">Interior Hangat</option>
                                <option value="Taman Kurma Malam">Taman Kurma</option>
                                <option value="Tekstur Kaligrafi Halus">Kaligrafi Halus</option>
                                <option value="custom">Kustom (Tulis Sendiri)</option>
                            </select>
                            <input type="text" id="fup-bg-custom" class="hidden" placeholder="Deskripsikan background..." style="width: 100%; margin-top: 5px; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                        </div>
                        <!-- Frame Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Bingkai / Frame</label>
                            <select id="fup-frame-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="Tanpa Bingkai">Tanpa Bingkai</option>
                                <option value="Lingkaran Ketupat Emas">Ketupat Emas</option>
                                <option value="Floral Islami Hijau">Floral Hijau</option>
                                <option value="Ukiran Kayu Jepara">Ukiran Kayu</option>
                                <option value="Laser Cut Gold Metal">Laser Cut Gold</option>
                                <option value="Neon Light Frame">Neon Light</option>
                                <option value="Kubah Masjid Arch">Kubah Arch</option>
                                <option value="Bingkai Awan Lembut">Awan Lembut</option>
                                <option value="Bingkai Pita Emas">Pita Emas</option>
                                <option value="Bingkai Floral Pastel">Floral Pastel</option>
                                <option value="Bingkai Ornamen Arabesque">Ornamen Arabesque</option>
                                <option value="custom">Kustom (Tulis Sendiri)</option>
                            </select>
                            <input type="text" id="fup-frame-custom" class="hidden" placeholder="Deskripsikan bingkai..." style="width: 100%; margin-top: 5px; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                        </div>
                        <!-- Ratio Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Rasio Gambar</label>
                            <select id="fup-ratio-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="auto">Auto (Ikuti Gambar Asli)</option>
                                <option value="1:1">Square (1:1)</option>
                                <option value="9:16">Story / TikTok (9:16)</option>
                                <option value="16:9">Landscape / YT (16:9)</option>
                                <option value="3:4">Portrait (3:4)</option>
                                <option value="4:3">Landscape (4:3)</option>
                            </select>
                        </div>
                        <!-- Slider Jumlah -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Jumlah Variasi: <span id="fup-count-val" style="color: var(--accent-gold);">1</span></label>
                            <input type="range" id="fup-result-count" min="1" max="10" value="1" style="width: 100%; accent-color: var(--accent-green);">
                        </div>
                        <!-- Embed Text Option -->
                        <div style="margin-bottom: 5px; display:flex; align-items:center; gap:8px;">
                            <input type="checkbox" id="fup-embed-text-check" style="accent-color: var(--accent-gold); width:16px; height:16px;">
                            <label for="fup-embed-text-check" style="font-size: 0.8rem; cursor:pointer;">Tulis ucapan
                                langsung di dalam gambar?</label>
                        </div>
                    </div>
                    <button id="fup-btn-generate" class="btn-generate">
                        <i class="fas fa-wand-magic-sparkles" style="margin-right:8px;"></i> Buat Sekarang
                    </button>
                </div>
            </div> <!-- End of input-section -->
            <!-- Output Area (Loading & Result) -->
            <div id="fup-output-area">
                <!-- Loading State -->
                <div id="fup-loading-state" class="hidden" style="text-align:center; padding:1rem 0; height: 100%; display: flex; flex-direction: column; justify-content: center;">
                    <div style="font-size:2rem; color:var(--accent-green); margin-bottom:0.5rem;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <p style="color:var(--text-muted); font-size:0.9rem;">AI sedang bekerja... Mohon tunggu.</p>
                </div>
                <!-- Result Card -->
                <div id="fup-result-card" style="position: relative; z-index: 20; background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); height: 100%; display: flex; flex-direction: column;">
                    <h3 style="font-size:1rem; margin-bottom:1rem; flex-shrink: 0;">Hasil Karya AI:</h3>
                    <div id="fup-result-content" style="border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.2); flex: 1; display: flex; align-items: center; justify-content: center; min-height: 0;">
                        <!-- Empty State Text if no image -->
                        <p class="empty-state-text" style="color: var(--text-muted); text-align: center; padding: 1rem; font-size: 0.9rem;">
                            <i class="fas fa-image" style="font-size: 2rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
                            Hasil foto akan muncul di sini. </p>
                    </div>
                    <div style="text-align: right; margin-top: 0.5rem; flex-shrink: 0;">
                        <small style="color: var(--text-muted);">Tekan tahan gambar untuk menyimpan</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Foto Ucapan Lebaran Modal -->
<div id="ful-modal" class="feature-page hidden">
    <div class="modal-content">
        <button class="close-modal" onclick="closeFotoUcapanLebaranModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div style="text-align:center; margin-bottom:1.5rem;">
            <div style="width:60px; height:60px; background:var(--accent-green); border-radius:15px; display:inline-flex; align-items:center; justify-content:center; font-size:1.5rem; margin-bottom:1rem;">
                <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-ucapan-lebaran-icon.jpg" alt="Foto Ucapan Lebaran" style="width:100%; height:100%; border-radius:15px; object-fit:cover;">
            </div>
            <h2 id="ful-modal-title">Foto Ucapan Lebaran</h2>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-top:0.5rem;">Buat kartu ucapan lebaran dengan foto keluarga otomatis.</p>
            <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/1d499e14-3d96-4908-b1cb-4ac94a89a5f5">
                <i class="fas fa-play-circle"></i>
                <span>Tonton Tutorial</span>
            </button>
        </div>
        <div class="feature-grid-wrapper">
            <div id="ful-input-section">
                <div class="drag-area" id="ful-drag-area">
                    <i class="fas fa-cloud-upload-alt" style="font-size:2rem; margin-bottom:1rem; color:var(--text-muted);"></i>
                    <p id="ful-upload-text">Klik untuk upload foto (Maks 5)</p>
                    <input type="file" id="ful-file-upload" accept="image/*" multiple hidden>
                    <div id="ful-upload-preview" style="display:none; width:100%; margin-top:0.75rem;"></div>
                </div>
                <div style="margin-top:auto;">
                    <!-- Message Section -->
                    <div id="ful-msg-section-wrapper">
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem;">
                            <label style="font-size:0.9rem; display:block;">Pesan Ucapan <span style="color:#ff6b6b">*</span></label>
                            <button id="ful-btn-auto-msg" style="background:var(--accent-gold); color:var(--primary-dark); border:none; padding:4px 8px; border-radius:6px; font-size:0.7rem; font-weight:600; cursor:pointer; display:flex; align-items:center; gap:4px;">
                                <i class="fas fa-bolt"></i> Buat Otomatis
                            </button>
                        </div>
                        <textarea id="ful-pesan-input" style="width:100%; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:10px; padding:10px; color:white; margin-bottom:1rem;" rows="3" placeholder="Tulis ucapan lebaran..."></textarea>
                    </div>
                    <div id="ful-controls-section" style="margin-bottom: 1rem; background: rgba(255, 255, 255, 0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                        <!-- Background Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Background Nuansa</label>
                            <select id="ful-bg-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="Masjid Megah Malam Hari">Masjid Megah Malam</option>
                                <option value="Halaman Masjid Nabawi">Halaman Masjid Nabawi</option>
                                <option value="Interior Rumah Klasik Islami">Interior Islami</option>
                                <option value="Kota Modern Islami">Kota Modern</option>
                                <option value="Taman Bunga Syurga">Taman Bunga</option>
                                <option value="Gerbang Idul Fitri Berkilau">Gerbang Idul Fitri</option>
                                <option value="Lampu Gantung Emas Hangat">Lampu Gantung</option>
                                <option value="Karpet Merah Masjid">Karpet Masjid</option>
                                <option value="Langit Senja Idul Fitri">Langit Senja</option>
                                <option value="Rumah Kampung Lebaran">Rumah Kampung</option>
                                <option value="Kembang Api Idul Fitri">Kembang Api</option>
                                <option value="Halaman Rumah Lampu Hias">Halaman Lampu Hias</option>
                                <option value="Masjid Kubah Putih Pagi">Masjid Pagi</option>
                                <option value="Jalan Kampung Lebaran">Jalan Kampung</option>
                                <option value="Langit Malam Bulan Sabit">Bulan Sabit</option>
                                <option value="custom">Kustom (Tulis Sendiri)</option>
                            </select>
                            <input type="text" id="ful-bg-custom" class="hidden" placeholder="Deskripsikan background..." style="width: 100%; margin-top: 5px; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                        </div>
                        <!-- Frame Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Bingkai / Frame</label>
                            <select id="ful-frame-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="Tanpa Bingkai">Tanpa Bingkai</option>
                                <option value="Lingkaran Ketupat Emas">Ketupat Emas</option>
                                <option value="Floral Islami Hijau">Floral Hijau</option>
                                <option value="Ukiran Kayu Jepara">Ukiran Kayu</option>
                                <option value="Laser Cut Gold Metal">Laser Cut Gold</option>
                                <option value="Neon Light Frame">Neon Light</option>
                                <option value="Kubah Masjid Arch">Kubah Arch</option>
                                <option value="Awan Kartun Lembut">Awan Lembut</option>
                                <option value="Pita Idul Fitri">Pita Idul Fitri</option>
                                <option value="Bunga Mawar Melingkar">Bunga Mawar</option>
                                <option value="Bingkai Lentera Ramadhan">Lentera Ramadhan</option>
                                <option value="Bingkai Kaligrafi Emas">Kaligrafi Emas</option>
                                <option value="custom">Kustom (Tulis Sendiri)</option>
                            </select>
                            <input type="text" id="ful-frame-custom" class="hidden" placeholder="Deskripsikan bingkai..." style="width: 100%; margin-top: 5px; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                        </div>
                        <!-- Ratio Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Rasio Gambar</label>
                            <select id="ful-ratio-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="auto">Auto (Ikuti Gambar Asli)</option>
                                <option value="1:1">Square (1:1)</option>
                                <option value="9:16">Story / TikTok (9:16)</option>
                                <option value="16:9">Landscape / YT (16:9)</option>
                                <option value="3:4">Portrait (3:4)</option>
                                <option value="4:3">Landscape (4:3)</option>
                            </select>
                        </div>
                        <!-- Slider Jumlah -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Jumlah Variasi: <span id="ful-count-val" style="color: var(--accent-gold);">1</span></label>
                            <input type="range" id="ful-result-count" min="1" max="10" value="1" style="width: 100%; accent-color: var(--accent-green);">
                        </div>
                        <!-- Embed Text Option -->
                        <div style="margin-bottom: 5px; display:flex; align-items:center; gap:8px;">
                            <input type="checkbox" id="ful-embed-text-check" style="accent-color: var(--accent-gold); width:16px; height:16px;">
                            <label for="ful-embed-text-check" style="font-size: 0.8rem; cursor:pointer;">Tulis ucapan
                                langsung di dalam gambar?</label>
                        </div>
                    </div>
                    <button id="ful-btn-generate" class="btn-generate">
                        <i class="fas fa-wand-magic-sparkles" style="margin-right:8px;"></i> Buat Sekarang
                    </button>
                </div>
            </div> <!-- End of input-section -->
            <!-- Output Area (Loading & Result) -->
            <div id="ful-output-area">
                <!-- Loading State -->
                <div id="ful-loading-state" class="hidden" style="text-align:center; padding:1rem 0; height: 100%; display: flex; flex-direction: column; justify-content: center;">
                    <div style="font-size:2rem; color:var(--accent-green); margin-bottom:0.5rem;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <p style="color:var(--text-muted); font-size:0.9rem;">AI sedang bekerja... Mohon tunggu.</p>
                </div>
                <!-- Result Card -->
                <div id="ful-result-card" style="position: relative; z-index: 20; background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); height: 100%; display: flex; flex-direction: column;">
                    <h3 style="font-size:1rem; margin-bottom:1rem; flex-shrink: 0;">Hasil Karya AI:</h3>
                    <div id="ful-result-content" style="border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.2); flex: 1; display: flex; align-items: center; justify-content: center; min-height: 0;">
                        <!-- Empty State Text if no image -->
                        <p class="empty-state-text" style="color: var(--text-muted); text-align: center; padding: 1rem; font-size: 0.9rem;">
                            <i class="fas fa-image" style="font-size: 2rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
                            Hasil foto akan muncul di sini. </p>
                    </div>
                    <div style="text-align: right; margin-top: 0.5rem; flex-shrink: 0;">
                        <small style="color: var(--text-muted);">Tekan tahan gambar untuk menyimpan</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Foto Produk Ramadhan Modal -->
<div id="fpr-modal" class="feature-page hidden">
    <div class="modal-content">
        <button class="close-modal" onclick="closeFotoProdukRamadhanModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div style="text-align:center; margin-bottom:1.5rem;">
            <div style="width:60px; height:60px; background:var(--accent-green); border-radius:15px; display:inline-flex; align-items:center; justify-content:center; font-size:1.5rem; margin-bottom:1rem;">
                <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-produk-ramadhan-icon.jpg" alt="Foto Produk Ramadhan" style="width:100%; height:100%; border-radius:15px; object-fit:cover;">
            </div>
            <h2 id="fpr-modal-title">Foto Produk Ramadhan</h2>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-top:0.5rem;">Ubah foto produk biasa menjadi katalog ramadhan profesional.</p>
            <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/78d9612e-fa90-4e5e-9119-a5989ddcf75c">
                <i class="fas fa-play-circle"></i>
                <span>Tonton Tutorial</span>
            </button>
        </div>
        <div class="feature-grid-wrapper">
            <div id="fpr-input-section">
                <div class="drag-area" id="fpr-drag-area">
                    <i class="fas fa-cloud-upload-alt" style="font-size:2rem; margin-bottom:1rem; color:var(--text-muted);"></i>
                    <p id="fpr-upload-text">Klik untuk upload foto produk (Maks 5)</p>
                    <input type="file" id="fpr-file-upload" accept="image/*" multiple hidden>
                    <div id="fpr-upload-preview" style="display:none; width:100%; margin-top:0.75rem;"></div>
                </div>
                <!-- Logo Upload (Opsional) - Moved here -->
                <div style="margin-top: 10px; margin-bottom: 10px;">
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <label for="fpr-logo-input" id="fpr-logo-upload-box" style="display: flex; align-items: center; gap: 10px; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                            <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: var(--text-muted);">
                                <i class="fas fa-upload" style="font-size: 0.8rem;"></i>
                            </div>
                            <div style="flex: 1;">
                                <p style="font-size: 0.8rem; font-weight: 600; color: white;">Tambah Logo (Opsional)</p>
                                <p style="font-size: 0.7rem; color: var(--text-muted);">PNG Transparan</p>
                            </div>
                            <img id="fpr-logo-preview" class="hidden" style="width: 32px; height: 32px; object-fit: contain; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05);">
                            <button id="fpr-logo-remove" class="hidden" style="color: #ef4444; background: none; border: none; cursor: pointer;"><i class="fas fa-times" style="font-size: 0.9rem;"></i></button>
                        </label>
                        <input type="file" id="fpr-logo-input" class="hidden" accept="image/png, image/jpeg, image/webp">
                        <div id="fpr-logo-controls" class="hidden" style="background: rgba(255,255,255,0.03); padding: 10px; border-radius: 12px; display: flex; flex-direction: column; gap: 10px;">
                            <div>
                                <p style="font-size: 0.7rem; font-weight: bold; color: var(--text-muted); text-transform: uppercase; margin-bottom: 5px;">Posisi Logo</p>
                                <div id="fpr-logo-position-options" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px;">
                                    <button data-value="top-left" class="option-btn selected" style="padding: 5px; border-radius: 8px; background: rgba(255,255,255,0.1); border: 1px solid transparent; cursor: pointer; display: flex; justify-content: center;">
                                        <div style="width: 12px; height: 12px; border-top: 2px solid white; border-left: 2px solid white;"></div>
                                    </button>
                                    <button data-value="top-right" class="option-btn" style="padding: 5px; border-radius: 8px; background: rgba(255,255,255,0.1); border: 1px solid transparent; cursor: pointer; display: flex; justify-content: center;">
                                        <div style="width: 12px; height: 12px; border-top: 2px solid white; border-right: 2px solid white;"></div>
                                    </button>
                                    <button data-value="center" class="option-btn" style="padding: 5px; border-radius: 8px; background: rgba(255,255,255,0.1); border: 1px solid transparent; cursor: pointer; display: flex; justify-content: center;">
                                        <div style="width: 6px; height: 6px; background: white; border-radius: 50%; align-self: center;"></div>
                                    </button>
                                    <button data-value="bottom-left" class="option-btn" style="padding: 5px; border-radius: 8px; background: rgba(255,255,255,0.1); border: 1px solid transparent; cursor: pointer; display: flex; justify-content: center;">
                                        <div style="width: 12px; height: 12px; border-bottom: 2px solid white; border-left: 2px solid white;"></div>
                                    </button>
                                    <button data-value="bottom-right" class="option-btn" style="padding: 5px; border-radius: 8px; background: rgba(255,255,255,0.1); border: 1px solid transparent; cursor: pointer; display: flex; justify-content: center;">
                                        <div style="width: 12px; height: 12px; border-bottom: 2px solid white; border-right: 2px solid white;"></div>
                                    </button>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <p style="font-size: 0.7rem; font-weight: bold; color: var(--text-muted); text-transform: uppercase;">Transparansi</p>
                                    <span id="fpr-logo-opacity-value" style="font-size: 0.7rem; font-weight: bold; color: white;">80%</span>
                                </div>
                                <input type="range" id="fpr-logo-opacity-input" min="0" max="100" value="80" style="width: 100%; height: 4px; background: #4b5563; border-radius: 2px; -webkit-appearance: none; accent-color: var(--accent-green);">
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <p style="font-size: 0.7rem; font-weight: bold; color: var(--text-muted); text-transform: uppercase;">Ukuran</p>
                                    <span id="fpr-logo-size-value" style="font-size: 0.7rem; font-weight: bold; color: white;">100px</span>
                                </div>
                                <input type="range" id="fpr-logo-size-input" min="50" max="500" value="100" step="10" style="width: 100%; height: 4px; background: #4b5563; border-radius: 2px; -webkit-appearance: none; accent-color: var(--accent-green);">
                            </div>
                        </div>
                    </div>
                </div>
                <div style="margin-top:auto;">
                    <div id="fpr-controls-section" style="margin-bottom: 1rem; background: rgba(255, 255, 255, 0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                        <!-- AI Concept Toggle -->
                        <div style="margin-bottom: 15px; display:flex; align-items:center; justify-content:space-between; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                            <div>
                                <label style="font-size: 0.9rem; font-weight: 600; display: block; color: var(--accent-gold);">AI Concept Mode</label>
                                <span style="font-size: 0.7rem; color: var(--text-muted);">Biarkan AI menentukan konsep terbaik</span>
                            </div>
                            <label class="switch" style="position: relative; display: inline-block; width: 40px; height: 24px;">
                                <input type="checkbox" id="fpr-ai-toggle" style="opacity: 0; width: 0; height: 0;">
                                <span class="slider round" style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px;"></span>
                            </label>
                            <style>
                                .slider:before {
                                    position: absolute;
                                    content: "";
                                    height: 16px;
                                    width: 16px;
                                    left: 4px;
                                    bottom: 4px;
                                    background-color: white;
                                    transition: .4s;
                                    border-radius: 50%;
                                }

                                input:checked + .slider {
                                    background-color: #37b089 !important; /* accent-green */
                                }

                                input:checked + .slider:before {
                                    transform: translateX(16px);
                                }
                            </style>
                        </div>
                        <!-- Manual Controls (Hidden if AI Toggle is ON) -->
                        <div id="fpr-manual-controls">
                            <!-- Style Selector -->
                            <div style="margin-bottom: 10px;">
                                <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Style Produk</label>
                                <select id="fpr-style-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                    <option value="Minimalist Studio">Minimalist Studio</option>
                                    <option value="Luxury Gold & Black">Luxury Gold & Black</option>
                                    <option value="Warm & Cozy Ramadhan">Warm & Cozy</option>
                                    <option value="Outdoor Nature">Outdoor Nature</option>
                                    <option value="Traditional Islamic Pattern">Traditional Islamic</option>
                                    <option value="Modern Marketplace Display">Modern Marketplace</option>
                                    <option value="Glossy Premium Showcase">Glossy Premium</option>
                                    <option value="Rustic Artisan Style">Rustic Artisan</option>
                                    <option value="Soft Pastel Minimal">Soft Pastel</option>
                                    <option value="Urban Night Spotlight">Urban Night</option>
                                    <option value="custom">Kustom (Tulis Sendiri)</option>
                                </select>
                                <input type="text" id="fpr-style-custom" class="hidden" placeholder="Deskripsikan style..." style="width: 100%; margin-top: 5px; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                            </div>
                            <!-- Location Selector -->
                            <div style="margin-bottom: 10px;">
                                <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Lokasi / Background</label>
                                <select id="fpr-location-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                    <option value="Meja Kayu Rustic">Meja Kayu Rustic</option>
                                    <option value="Podium Marmer Putih">Podium Marmer Putih</option>
                                    <option value="Jendela dengan Cahaya Sore">Jendela Cahaya Sore</option>
                                    <option value="Halaman Masjid">Halaman Masjid</option>
                                    <option value="Kain Sutra Lembut">Kain Sutra Lembut</option>
                                    <option value="Studio Putih Bersih">Studio Putih</option>
                                    <option value="Meja Batu Granit">Meja Granit</option>
                                    <option value="Rak Kayu Minimalis">Rak Kayu</option>
                                    <option value="Etalase Kaca Modern">Etalase Kaca</option>
                                    <option value="Backdrop Masjid Senja">Backdrop Masjid</option>
                                    <option value="custom">Kustom (Tulis Sendiri)</option>
                                </select>
                                <input type="text" id="fpr-location-custom" class="hidden" placeholder="Deskripsikan lokasi..." style="width: 100%; margin-top: 5px; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                            </div>
                        </div>
                        <!-- Ratio Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Rasio Gambar</label>
                            <select id="fpr-ratio-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="auto">Auto (Ikuti Gambar Asli)</option>
                                <option value="1:1">Square (1:1) - IG Feed</option>
                                <option value="9:16">Portrait (9:16) - Story/TikTok</option>
                                <option value="16:9">Landscape (16:9) - Banner</option>
                                <option value="4:5">Portrait (4:5) - IG Portrait</option>
                                <option value="3:4">Portrait (3:4) - Standard</option>
                            </select>
                        </div>
                        <!-- Slider Jumlah -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Jumlah Variasi: <span id="fpr-count-val" style="color: var(--accent-gold);">1</span></label>
                            <input type="range" id="fpr-result-count" min="1" max="10" value="1" style="width: 100%; accent-color: var(--accent-green);">
                        </div>
                    </div>
                    <button id="fpr-btn-generate" class="btn-generate">
                        <i class="fas fa-wand-magic-sparkles" style="margin-right:8px;"></i> Buat Foto Produk
                    </button>
                </div>
            </div> <!-- End of input-section -->
            <!-- Output Area (Loading & Result) -->
            <div id="fpr-output-area">
                <!-- Loading State -->
                <div id="fpr-loading-state" class="hidden" style="text-align:center; padding:1rem 0; height: 100%; display: flex; flex-direction: column; justify-content: center;">
                    <div style="font-size:2rem; color:var(--accent-green); margin-bottom:0.5rem;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <p id="fpr-loading-text" style="color:var(--text-muted); font-size:0.9rem;">AI sedang bekerja... Mohon tunggu.</p>
                </div>
                <!-- Result Card -->
                <div id="fpr-result-card" style="position: relative; z-index: 20; background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); height: 100%; display: flex; flex-direction: column;">
                    <h3 style="font-size:1rem; margin-bottom:1rem; flex-shrink: 0;">Hasil Karya AI:</h3>
                    <div id="fpr-result-content" style="border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.2); flex: 1; display: flex; align-items: center; justify-content: center; min-height: 0;">
                        <!-- Empty State Text if no image -->
                        <p class="empty-state-text" style="color: var(--text-muted); text-align: center; padding: 1rem; font-size: 0.9rem;">
                            <i class="fas fa-image" style="font-size: 2rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
                            Hasil foto akan muncul di sini. </p>
                    </div>
                    <div style="text-align: right; margin-top: 0.5rem; flex-shrink: 0;">
                        <small style="color: var(--text-muted);">Tekan tahan gambar untuk menyimpan</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Foto Fashion Ramadhan Modal -->
<div id="ffr-modal" class="feature-page hidden">
    <div class="modal-content">
        <button class="close-modal" onclick="closeFotoFashionRamadhanModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div style="text-align:center; margin-bottom:1.5rem;">
            <div style="width:60px; height:60px; background:var(--accent-green); border-radius:15px; display:inline-flex; align-items:center; justify-content:center; font-size:1.5rem; margin-bottom:1rem;">
                <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-fashion-ramadhan-icon.jpg" alt="Foto Fashion Ramadhan" style="width:100%; height:100%; border-radius:15px; object-fit:cover;">
            </div>
            <h2 id="ffr-modal-title">Foto Fashion Ramadhan</h2>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-top:0.5rem;">Katalog fashion Ramadhan instan dengan model AI atau kustom.</p>
        </div>
        <div class="feature-grid-wrapper">
            <div id="ffr-input-section">
                <!-- Upload Pakaian (Wajib) -->
                <div class="drag-area" id="ffr-drag-area-cloth">
                    <i class="fas fa-vest" style="font-size:2rem; margin-bottom:1rem; color:var(--text-muted);"></i>
                    <p id="ffr-upload-text-cloth">Upload Foto Pakaian/Baju (Maks 5)</p>
                    <input type="file" id="ffr-file-cloth" accept="image/*" multiple hidden>
                    <div id="ffr-upload-preview-cloth" style="display:none; width:100%; margin-top:0.75rem;"></div>
                </div>
                <!-- Logo Upload (Opsional) - Moved here -->
                <div style="margin-top: 10px; margin-bottom: 10px;">
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <label for="ffr-logo-input" id="ffr-logo-upload-box" style="display: flex; align-items: center; gap: 10px; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                            <div style="width: 32px; height: 32px; background: rgba(255,255,255,0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: var(--text-muted);">
                                <i class="fas fa-upload" style="font-size: 0.8rem;"></i>
                            </div>
                            <div style="flex: 1;">
                                <p style="font-size: 0.8rem; font-weight: 600; color: white;">Tambah Logo (Opsional)</p>
                                <p style="font-size: 0.7rem; color: var(--text-muted);">PNG Transparan</p>
                            </div>
                            <img id="ffr-logo-preview" class="hidden" style="width: 32px; height: 32px; object-fit: contain; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05);">
                            <button id="ffr-logo-remove" class="hidden" style="color: #ef4444; background: none; border: none; cursor: pointer;"><i class="fas fa-times" style="font-size: 0.9rem;"></i></button>
                        </label>
                        <input type="file" id="ffr-logo-input" class="hidden" accept="image/png, image/jpeg, image/webp">
                        <div id="ffr-logo-controls" class="hidden" style="background: rgba(255,255,255,0.03); padding: 10px; border-radius: 12px; display: flex; flex-direction: column; gap: 10px;">
                            <div>
                                <p style="font-size: 0.7rem; font-weight: bold; color: var(--text-muted); text-transform: uppercase; margin-bottom: 5px;">Posisi Logo</p>
                                <div id="ffr-logo-position-options" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px;">
                                    <button data-value="top-left" class="option-btn selected" style="padding: 5px; border-radius: 8px; background: rgba(255,255,255,0.1); border: 1px solid transparent; cursor: pointer; display: flex; justify-content: center;">
                                        <div style="width: 12px; height: 12px; border-top: 2px solid white; border-left: 2px solid white;"></div>
                                    </button>
                                    <button data-value="top-right" class="option-btn" style="padding: 5px; border-radius: 8px; background: rgba(255,255,255,0.1); border: 1px solid transparent; cursor: pointer; display: flex; justify-content: center;">
                                        <div style="width: 12px; height: 12px; border-top: 2px solid white; border-right: 2px solid white;"></div>
                                    </button>
                                    <button data-value="center" class="option-btn" style="padding: 5px; border-radius: 8px; background: rgba(255,255,255,0.1); border: 1px solid transparent; cursor: pointer; display: flex; justify-content: center;">
                                        <div style="width: 6px; height: 6px; background: white; border-radius: 50%; align-self: center;"></div>
                                    </button>
                                    <button data-value="bottom-left" class="option-btn" style="padding: 5px; border-radius: 8px; background: rgba(255,255,255,0.1); border: 1px solid transparent; cursor: pointer; display: flex; justify-content: center;">
                                        <div style="width: 12px; height: 12px; border-bottom: 2px solid white; border-left: 2px solid white;"></div>
                                    </button>
                                    <button data-value="bottom-right" class="option-btn" style="padding: 5px; border-radius: 8px; background: rgba(255,255,255,0.1); border: 1px solid transparent; cursor: pointer; display: flex; justify-content: center;">
                                        <div style="width: 12px; height: 12px; border-bottom: 2px solid white; border-right: 2px solid white;"></div>
                                    </button>
                                </div>
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <p style="font-size: 0.7rem; font-weight: bold; color: var(--text-muted); text-transform: uppercase;">Transparansi</p>
                                    <span id="ffr-logo-opacity-value" style="font-size: 0.7rem; font-weight: bold; color: white;">80%</span>
                                </div>
                                <input type="range" id="ffr-logo-opacity-input" min="0" max="100" value="80" style="width: 100%; height: 4px; background: #4b5563; border-radius: 2px; -webkit-appearance: none; accent-color: var(--accent-green);">
                            </div>
                            <div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <p style="font-size: 0.7rem; font-weight: bold; color: var(--text-muted); text-transform: uppercase;">Ukuran</p>
                                    <span id="ffr-logo-size-value" style="font-size: 0.7rem; font-weight: bold; color: white;">100px</span>
                                </div>
                                <input type="range" id="ffr-logo-size-input" min="50" max="500" value="100" step="10" style="width: 100%; height: 4px; background: #4b5563; border-radius: 2px; -webkit-appearance: none; accent-color: var(--accent-green);">
                            </div>
                        </div>
                    </div>
                </div>
                <div style="margin-top:1rem;">
                    <div id="ffr-controls-section" style="margin-bottom: 1rem; background: rgba(255, 255, 255, 0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                        <!-- AI Concept Toggle -->
                        <div style="margin-bottom: 15px; display:flex; align-items:center; justify-content:space-between; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                            <div>
                                <label style="font-size: 0.9rem; font-weight: 600; display: block; color: var(--accent-gold);">AI Concept Mode</label>
                                <span style="font-size: 0.7rem; color: var(--text-muted);">Biarkan AI menentukan konsep terbaik</span>
                            </div>
                            <label class="switch" style="position: relative; display: inline-block; width: 40px; height: 24px;">
                                <input type="checkbox" id="ffr-ai-toggle" style="opacity: 0; width: 0; height: 0;">
                                <span class="slider round" style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px;"></span>
                            </label>
                            <style>
                                .slider:before {
                                    position: absolute;
                                    content: "";
                                    height: 16px;
                                    width: 16px;
                                    left: 4px;
                                    bottom: 4px;
                                    background-color: white;
                                    transition: .4s;
                                    border-radius: 50%;
                                }

                                input:checked + .slider {
                                    background-color: #37b089 !important; /* accent-green */
                                }

                                input:checked + .slider:before {
                                    transform: translateX(16px);
                                }
                            </style>
                        </div>
                        <!-- Manual Controls (Hidden if AI Toggle is ON) -->
                        <div id="ffr-manual-controls">
                            <!-- Model Selection -->
                            <div style="margin-bottom: 10px;">
                                <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Pilih Model</label>
                                <select id="ffr-model-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                    <option value="ai-hijab">Model AI: Wanita Berhijab</option>
                                    <option value="ai-female">Model AI: Wanita (Non-Hijab)</option>
                                    <option value="ai-male">Model AI: Pria</option>
                                    <option value="ai-kid">Model AI: Anak-anak</option>
                                    <option value="mannequin">Manekin Hantu (Ghost Mannequin)</option>
                                    <option value="ai-couple">Model AI: Couple</option>
                                    <option value="ai-family">Model AI: Keluarga</option>
                                    <option value="ai-teen">Model AI: Remaja</option>
                                    <option value="ai-sporty">Model AI: Sporty</option>
                                    <option value="ai-formal">Model AI: Formal</option>
                                    <option value="upload">Upload Foto Model Sendiri</option>
                                </select>
                            </div>
                            <!-- Upload Model (Hidden by default) -->
                            <div id="ffr-upload-model-container" class="hidden" style="margin-bottom: 10px;">
                                <div class="drag-area" id="ffr-drag-area-model" style="height: 100px; padding: 10px;">
                                    <i class="fas fa-user-circle" style="font-size:1.5rem; margin-bottom:0.5rem; color:var(--text-muted);"></i>
                                    <p id="ffr-upload-text-model" style="font-size: 0.8rem;">Upload Foto Model (Maks 5)</p>
                                    <input type="file" id="ffr-file-model" accept="image/*" multiple hidden>
                                    <div id="ffr-upload-preview-model" style="display:none; width:100%; margin-top:0.5rem;"></div>
                                </div>
                            </div>
                            <!-- Style Selector -->
                            <div style="margin-bottom: 10px;">
                                <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Style Fashion</label>
                                <select id="ffr-style-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                    <option value="Ramadhan Casual">Ramadhan Casual</option>
                                    <option value="Luxury Eid Mubarak">Luxury Eid Mubarak</option>
                                    <option value="Minimalist Studio">Minimalist Studio</option>
                                    <option value="Street Style">Street Style</option>
                                    <option value="Monochrome Elegant">Monochrome Elegant</option>
                                    <option value="Pastel Soft Look">Pastel Soft</option>
                                    <option value="Cinematic Editorial">Cinematic Editorial</option>
                                    <option value="Sporty Athleisure">Sporty Athleisure</option>
                                    <option value="Boho Chic">Boho Chic</option>
                                    <option value="custom">Kustom (Tulis Sendiri)</option>
                                </select>
                                <input type="text" id="ffr-style-custom" class="hidden" placeholder="Deskripsikan style..." style="width: 100%; margin-top: 5px; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                            </div>
                            <!-- Location Selector -->
                            <div style="margin-bottom: 10px;">
                                <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Lokasi / Background</label>
                                <select id="ffr-location-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                    <option value="Studio Polos">Studio Polos (Clean)</option>
                                    <option value="Interior Masjid Modern">Interior Masjid Modern</option>
                                    <option value="Taman Sore Hari">Taman Sore Hari</option>
                                    <option value="Gurun Pasir Cinematic">Gurun Pasir Cinematic</option>
                                    <option value="Rooftop City Night">Rooftop City Night</option>
                                    <option value="Halaman Rumah Lampu Hias">Halaman Lampu Hias</option>
                                    <option value="Pasar Malam Ramadhan">Pasar Malam Ramadhan</option>
                                    <option value="Koridor Lampu Lentera">Koridor Lentera</option>
                                    <option value="Tepi Laut Senja">Tepi Laut Senja</option>
                                    <option value="custom">Kustom (Tulis Sendiri)</option>
                                </select>
                                <input type="text" id="ffr-location-custom" class="hidden" placeholder="Deskripsikan lokasi..." style="width: 100%; margin-top: 5px; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                            </div>
                        </div>
                        <!-- Ratio Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Rasio Gambar</label>
                            <select id="ffr-ratio-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="auto">Auto (Ikuti Gambar Asli)</option>
                                <option value="3:4">Portrait (3:4) - Fashion Standard</option>
                                <option value="9:16">Portrait (9:16) - Story/Reels</option>
                                <option value="1:1">Square (1:1) - Feed</option>
                                <option value="4:5">Portrait (4:5) - IG Portrait</option>
                                <option value="16:9">Landscape (16:9) - Banner</option>
                            </select>
                        </div>
                        <!-- Slider Jumlah -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Jumlah Variasi: <span id="ffr-count-val" style="color: var(--accent-gold);">1</span></label>
                            <input type="range" id="ffr-result-count" min="1" max="10" value="1" style="width: 100%; accent-color: var(--accent-green);">
                        </div>
                    </div>
                    <button id="ffr-btn-generate" class="btn-generate">
                        <i class="fas fa-wand-magic-sparkles" style="margin-right:8px;"></i> Buat Foto Fashion
                    </button>
                </div>
            </div> <!-- End of input-section -->
            <!-- Output Area (Loading & Result) -->
            <div id="ffr-output-area">
                <!-- Loading State -->
                <div id="ffr-loading-state" class="hidden" style="text-align:center; padding:1rem 0; height: 100%; display: flex; flex-direction: column; justify-content: center;">
                    <div style="font-size:2rem; color:var(--accent-green); margin-bottom:0.5rem;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <p id="ffr-loading-text" style="color:var(--text-muted); font-size:0.9rem;">AI sedang bekerja... Mohon tunggu.</p>
                </div>
                <!-- Result Card -->
                <div id="ffr-result-card" style="position: relative; z-index: 20; background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); height: 100%; display: flex; flex-direction: column;">
                    <h3 style="font-size:1rem; margin-bottom:1rem; flex-shrink: 0;">Hasil Karya AI:</h3>
                    <div id="ffr-result-content" style="border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.2); flex: 1; display: flex; align-items: center; justify-content: center; min-height: 0;">
                        <!-- Empty State Text if no image -->
                        <p class="empty-state-text" style="color: var(--text-muted); text-align: center; padding: 1rem; font-size: 0.9rem;">
                            <i class="fas fa-tshirt" style="font-size: 2rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
                            Hasil foto akan muncul di sini. </p>
                    </div>
                    <div style="text-align: right; margin-top: 0.5rem; flex-shrink: 0;">
                        <small style="color: var(--text-muted);">Tekan tahan gambar untuk menyimpan</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Sticker Muslim Modal (Renamed from Avatar Muslim) -->
<div id="am-modal" class="feature-page hidden">
    <div class="modal-content">
        <button class="close-modal" onclick="closeAvatarMuslimModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div style="text-align:center; margin-bottom:1.5rem;">
            <div style="width:60px; height:60px; background:var(--accent-green); border-radius:15px; display:inline-flex; align-items:center; justify-content:center; font-size:1.5rem; margin-bottom:1rem;">
                <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/sticker-muslim-icon.jpg" alt="Sticker Muslim" style="width:100%; height:100%; border-radius:15px; object-fit:cover;">
            </div>
            <h2 id="am-modal-title">Sticker Muslim</h2>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-top:0.5rem;">Buat stiker muslim/muslimah unik dari foto selfiemu.</p>
            <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/d8a23482-b0b3-4a9b-ab00-c595d62add1b">
                <i class="fas fa-play-circle"></i>
                <span>Tonton Tutorial</span>
            </button>
        </div>
        <div class="feature-grid-wrapper">
            <div id="am-input-section">
                <div class="drag-area" id="am-drag-area">
                    <i class="fas fa-cloud-upload-alt" style="font-size:2rem; margin-bottom:1rem; color:var(--text-muted);"></i>
                    <p>Upload Selfie Wajah Jelas</p>
                    <input type="file" id="am-file-upload" hidden>
                </div>
                <!-- AI Concept Mode Toggle (New UI) -->
                <div style="margin-top: 1rem; margin-bottom: 1rem; display:flex; align-items:center; justify-content:space-between; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                    <div>
                        <label style="font-size: 0.9rem; font-weight: 600; display: block; color: var(--accent-gold);">AI Concept Mode</label>
                        <span style="font-size: 0.7rem; color: var(--text-muted);">Biarkan AI menentukan konsep sticker terbaik</span>
                    </div>
                    <label class="switch" style="position: relative; display: inline-block; width: 40px; height: 24px;">
                        <input type="checkbox" id="am-ai-toggle" style="opacity: 0; width: 0; height: 0;">
                        <span class="slider round" style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px;"></span>
                    </label>
                    <style>
                        #am-modal .slider:before {
                            position: absolute;
                            content: "";
                            height: 16px;
                            width: 16px;
                            left: 4px;
                            bottom: 4px;
                            background-color: white;
                            transition: .4s;
                            border-radius: 50%;
                        }

                        #am-modal input:checked + .slider {
                            background-color: #2ecc71 !important; /* accent-green */
                        }

                        #am-modal input:checked + .slider:before {
                            transform: translateX(16px);
                        }
                    </style>
                </div>
                <div style="margin-top:auto;">
                    <div id="am-controls-section" style="margin-bottom: 1rem; background: rgba(255, 255, 255, 0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05); margin-top: 1rem;">
                        <!-- Basic Mode Options (Default) -->
                        <div id="am-basic-options">
                            <!-- Style Selector -->
                            <div style="margin-bottom: 10px;">
                                <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Gaya Sticker</label>
                                <select id="am-style-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                    <option value="Die-cut Sticker">Die-cut Sticker (Stiker Potong)</option>
                                    <option value="Chibi Cute Style">Chibi Cute Style</option>
                                    <option value="Vector Flat Illustration">Vector Flat Illustration</option>
                                    <option value="Emoji 3D Style">Emoji 3D Style</option>
                                    <option value="WhatsApp Sticker Style">WhatsApp Sticker Style</option>
                                    <option value="Retro Pop Art Sticker">Retro Pop Art Sticker</option>
                                    <option value="Hand Drawn Sketch Sticker">Hand Drawn Sketch Sticker</option>
                                    <option value="Pixel Art Sticker">Pixel Art Sticker</option>
                                    <option value="Neon Glow Sticker">Neon Glow Sticker</option>
                                    <option value="Claymation Sticker">Claymation Sticker</option>
                                </select>
                            </div>
                            <!-- Background Selector -->
                            <div style="margin-bottom: 10px;">
                                <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Latar Belakang</label>
                                <select id="am-bg-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                    <option value="White Background">White Background (Putih Polos)</option>
                                    <option value="Transparent Background">Transparent Background</option>
                                    <option value="Solid Green Islamic">Solid Green Islamic</option>
                                    <option value="Solid Cream Soft">Solid Cream Soft</option>
                                    <option value="Simple Geometric Pattern">Simple Geometric Pattern</option>
                                    <option value="Abstract Splash">Abstract Splash</option>
                                    <option value="Masjid Silhouette">Masjid Silhouette</option>
                                    <option value="Gradient Aura">Gradient Aura</option>
                                    <option value="custom">Kustom (Tulis Sendiri)</option>
                                </select>
                                <input type="text" id="am-bg-custom" class="hidden" placeholder="Deskripsikan latar belakang..." style="width: 100%; margin-top: 5px; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                            </div>
                        </div>
                        <!-- Ratio Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Rasio Gambar</label>
                            <select id="am-ratio-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="auto">Auto (Ikuti Gambar Asli)</option>
                                <option value="1:1">Square (1:1) - Best for Stickers</option>
                                <option value="9:16">Story / TikTok (9:16)</option>
                                <option value="16:9">Landscape / YT (16:9)</option>
                                <option value="3:4">Portrait (3:4)</option>
                                <option value="4:3">Landscape (4:3)</option>
                            </select>
                        </div>
                        <!-- Slider Jumlah -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Jumlah Variasi: <span id="am-count-val" style="color: var(--accent-gold);">1</span></label>
                            <input type="range" id="am-result-count" min="1" max="10" value="1" style="width: 100%; accent-color: var(--accent-green);">
                        </div>
                    </div>
                    <button id="am-btn-generate" class="btn-generate">
                        <i class="fas fa-wand-magic-sparkles" style="margin-right:8px;"></i> Buat Sticker
                    </button>
                </div>
            </div> <!-- End of input-section -->
            <!-- Output Area (Loading & Result) -->
            <div id="am-output-area">
                <!-- Loading State -->
                <div id="am-loading-state" class="hidden" style="text-align:center; padding:1rem 0; height: 100%; display: flex; flex-direction: column; justify-content: center;">
                    <div style="font-size:2rem; color:var(--accent-green); margin-bottom:0.5rem;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <p style="color:var(--text-muted); font-size:0.9rem;">AI sedang membuat stiker...</p>
                </div>
                <!-- Result Card -->
                <div id="am-result-card" style="position: relative; z-index: 20; background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); height: 100%; display: flex; flex-direction: column;">
                    <h3 style="font-size:1rem; margin-bottom:1rem; flex-shrink: 0;">Hasil Sticker AI:</h3>
                    <div id="am-result-content" style="border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.2); flex: 1; display: flex; align-items: center; justify-content: center; min-height: 0;">
                        <!-- Empty State Text if no image -->
                        <p class="empty-state-text" style="color: var(--text-muted); text-align: center; padding: 1rem; font-size: 0.9rem;">
                            <i class="fas fa-sticky-note" style="font-size: 2rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
                            Hasil stiker akan muncul di sini. </p>
                    </div>
                    <div style="text-align: right; margin-top: 0.5rem; flex-shrink: 0;">
                        <small style="color: var(--text-muted);">Tekan tahan gambar untuk menyimpan</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Busana Muslim Modal -->
<div id="bm-modal" class="feature-page hidden">
    <div class="modal-content">
        <button class="close-modal" onclick="closeBusanaMuslimModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div style="text-align:center; margin-bottom:1.5rem;">
            <div style="width:60px; height:60px; background:var(--accent-green); border-radius:15px; display:inline-flex; align-items:center; justify-content:center; font-size:1.5rem; margin-bottom:1rem;">
                <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/busana-muslim-icon.jpg" alt="Pakai Busana Muslim" style="width:100%; height:100%; border-radius:15px; object-fit:cover;">
            </div>
            <h2 id="bm-modal-title">Pakai Busana Muslim</h2>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-top:0.5rem;">Ganti outfit fotomu dengan berbagai koleksi busana muslim.</p>
            <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/05821096-2e68-412a-b558-61553d0a53a6">
                <i class="fas fa-play-circle"></i>
                <span>Tonton Tutorial</span>
            </button>
        </div>
        <div class="feature-grid-wrapper">
            <div id="bm-input-section">
                <!-- Upload Foto Utama (Wajib) -->
                <div class="drag-area" id="bm-drag-area-main">
                    <i class="fas fa-user" style="font-size:2rem; margin-bottom:1rem; color:var(--text-muted);"></i>
                    <p id="bm-upload-text-main">Upload Foto Kamu (Full Body/Half Body) (Maks 5)</p>
                    <input type="file" id="bm-file-main" accept="image/*" multiple hidden>
                    <div id="bm-upload-preview-main" style="display:none; width:100%; margin-top:0.75rem;"></div>
                </div>
                <div style="margin-top:1rem;">
                    <div id="bm-controls-section" style="margin-bottom: 1rem; background: rgba(255, 255, 255, 0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                        <!-- Clothing Selection -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Pilih Busana</label>
                            <select id="bm-clothing-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="Gamis Syar'i Modern (Pastel)">Gamis Syar'i Modern (Pastel)</option>
                                <option value="Koko Modern Casual (Earth Tone)">Koko Modern Casual (Earth Tone)</option>
                                <option value="Abaya Glamour (Black & Gold)">Abaya Glamour (Black & Gold)</option>
                                <option value="Baju Melayu Tradisional">Baju Melayu Tradisional</option>
                                <option value="Kaftan Elegan (Silk)">Kaftan Elegan (Silk)</option>
                                <option value="Tunic & Rok Plisket">Tunic & Rok Plisket</option>
                                <option value="Jubah Pria Arab Saudi">Jubah Pria Arab Saudi</option>
                                <option value="Batik Modern Muslim">Batik Modern Muslim</option>
                                <option value="Setelan Jas Koko Premium">Setelan Jas Koko Premium</option>
                                <option value="Hijab Style Streetwear">Hijab Style Streetwear</option>
                                <option value="custom">Kustom (Tulis Sendiri)</option>
                                <option value="upload">Upload Contoh Busana</option>
                            </select>
                            <!-- Custom Input -->
                            <input type="text" id="bm-clothing-custom" class="hidden" placeholder="Deskripsikan busana yang diinginkan..." style="width: 100%; margin-top: 5px; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                        </div>
                        <!-- Upload Cloth (Hidden by default) -->
                        <div id="bm-upload-cloth-container" class="hidden" style="margin-bottom: 10px;">
                            <div class="drag-area" id="bm-drag-area-cloth" style="height: 100px; padding: 10px;">
                                <i class="fas fa-tshirt" style="font-size:1.5rem; margin-bottom:0.5rem; color:var(--text-muted);"></i>
                                <p id="bm-upload-text-cloth" style="font-size: 0.8rem;">Upload Foto Referensi Busana (Maks 5)</p>
                                <input type="file" id="bm-file-cloth" accept="image/*" multiple hidden>
                                <div id="bm-upload-preview-cloth" style="display:none; width:100%; margin-top:0.5rem;"></div>
                            </div>
                        </div>
                        <!-- Ratio Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Rasio Gambar</label>
                            <select id="bm-ratio-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="auto">Auto (Ikuti Gambar Asli)</option>
                                <option value="1:1">Square (1:1)</option>
                                <option value="9:16">Story (9:16)</option>
                                <option value="16:9">Landscape (16:9)</option>
                                <option value="3:4">Portrait (3:4)</option>
                                <option value="4:3">Landscape (4:3)</option>
                            </select>
                        </div>
                        <!-- Slider Jumlah -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Jumlah Variasi: <span id="bm-count-val" style="color: var(--accent-gold);">1</span></label>
                            <input type="range" id="bm-result-count" min="1" max="10" value="1" style="width: 100%; accent-color: var(--accent-green);">
                        </div>
                    </div>
                    <button id="bm-btn-generate" class="btn-generate">
                        <i class="fas fa-wand-magic-sparkles" style="margin-right:8px;"></i> Ganti Busana
                    </button>
                </div>
            </div> <!-- End of input-section -->
            <!-- Output Area (Loading & Result) -->
            <div id="bm-output-area">
                <!-- Loading State -->
                <div id="bm-loading-state" class="hidden" style="text-align:center; padding:1rem 0; height: 100%; display: flex; flex-direction: column; justify-content: center;">
                    <div style="font-size:2rem; color:var(--accent-green); margin-bottom:0.5rem;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <p id="bm-loading-text" style="color:var(--text-muted); font-size:0.9rem;">Sedang menjahit busana digital...</p>
                </div>
                <!-- Result Card -->
                <div id="bm-result-card" style="position: relative; z-index: 20; background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); height: 100%; display: flex; flex-direction: column;">
                    <h3 style="font-size:1rem; margin-bottom:1rem; flex-shrink: 0;">Hasil Busana Muslim:</h3>
                    <div id="bm-result-content" style="border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.2); flex: 1; display: flex; align-items: center; justify-content: center; min-height: 0;">
                        <!-- Empty State Text if no image -->
                        <p class="empty-state-text" style="color: var(--text-muted); text-align: center; padding: 1rem; font-size: 0.9rem;">
                            <i class="fas fa-user-tie" style="font-size: 2rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
                            Hasil akan muncul di sini. </p>
                    </div>
                    <div style="text-align: right; margin-top: 0.5rem; flex-shrink: 0;">
                        <small style="color: var(--text-muted);">Tekan tahan gambar untuk menyimpan</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Template Quote Islami Modal -->
<div id="qi-modal" class="feature-page hidden">
    <div class="modal-content">
        <button class="close-modal" onclick="closeQuoteIslamiModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div style="text-align:center; margin-bottom:1.5rem;">
            <div style="width:60px; height:60px; background:var(--accent-green); border-radius:15px; display:inline-flex; align-items:center; justify-content:center; font-size:1.5rem; margin-bottom:1rem;">
                <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/quote-islami-icon.jpg" alt="Template Quote Islami" style="width:100%; height:100%; border-radius:15px; object-fit:cover;">
            </div>
            <h2 id="qi-modal-title">Template Quote Islami</h2>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-top:0.5rem;">Ubah ide menjadi visual quote islami yang estetik.</p>
            <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/1814734e-22aa-4f3d-8deb-3a40477700d8">
                <i class="fas fa-play-circle"></i>
                <span>Tonton Tutorial</span>
            </button>
            <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/0329414c-b13f-4931-b66e-224fdbea49a0">
                <i class="fas fa-play-circle"></i>
                <span>Tonton Tutorial</span>
            </button>
        </div>
        <div class="feature-grid-wrapper">
            <div id="qi-input-section">
                <!-- Input Ide Quote -->
                <div style="margin-bottom: 1.5rem;">
                    <label style="font-size:0.9rem; display:block; margin-bottom: 0.5rem;">Ide Quote / Topik <span style="color:#ff6b6b">*</span></label>
                    <textarea id="qi-idea-input" style="width:100%; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:10px; padding:15px; color:white; font-family:inherit;" rows="4" placeholder="Contoh: Tentang kesabaran menghadapi ujian, atau hadits tentang senyum..."></textarea>
                    <p style="font-size: 0.7rem; color: var(--text-muted); margin-top: 5px;">AI akan mengembangkan ide ini menjadi quote lengkap beserta background yang sesuai.</p>
                </div>
                <div style="margin-top:auto;">
                    <div id="qi-controls-section" style="margin-bottom: 1rem; background: rgba(255, 255, 255, 0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                        <!-- Ratio Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Rasio Gambar</label>
                            <select id="qi-ratio-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="1:1">Square (1:1) - IG Feed</option>
                                <option value="4:5">Portrait (4:5) - IG Portrait</option>
                                <option value="9:16">Portrait (9:16) - Story/TikTok</option>
                                <option value="16:9">Landscape (16:9) - Banner</option>
                                <option value="3:4">Portrait (3:4) - Standard</option>
                            </select>
                        </div>
                        <!-- Slider Jumlah -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Jumlah Variasi: <span id="qi-count-val" style="color: var(--accent-gold);">1</span></label>
                            <input type="range" id="qi-result-count" min="1" max="10" value="1" style="width: 100%; accent-color: var(--accent-green);">
                        </div>
                    </div>
                    <button id="qi-btn-generate" class="btn-generate">
                        <i class="fas fa-wand-magic-sparkles" style="margin-right:8px;"></i> Buat Quote
                    </button>
                </div>
            </div> <!-- End of input-section -->
            <!-- Output Area (Loading & Result) -->
            <div id="qi-output-area">
                <!-- Result Card -->
                <div id="qi-result-card" style="position: relative; z-index: 20; background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); height: 100%; display: flex; flex-direction: column;">
                    <h3 style="font-size:1rem; margin-bottom:1rem; flex-shrink: 0;">Hasil Quote Islami:</h3>
                    <div id="qi-result-content" style="border-radius:12px; overflow:y-auto; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.2); flex: 1; min-height: 0; padding: 10px; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                        <!-- Empty State Text if no image -->
                        <p class="empty-state-text" style="color: var(--text-muted); text-align: center; padding: 1rem; font-size: 0.9rem; grid-column: 1 / -1;">
                            <i class="fas fa-quote-right" style="font-size: 2rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
                            Hasil quote akan muncul di sini. </p>
                    </div>
                    <div style="text-align: right; margin-top: 0.5rem; flex-shrink: 0;">
                        <small style="color: var(--text-muted);">Tekan tahan gambar untuk menyimpan</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Kaligrafi Nama Modal -->
<div id="kn-modal" class="feature-page hidden">
    <div class="modal-content">
        <button class="close-modal" onclick="closeKaligrafiNamaModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div style="text-align:center; margin-bottom:1.5rem;">
            <div style="width:60px; height:60px; background:var(--accent-gold); border-radius:15px; display:inline-flex; align-items:center; justify-content:center; font-size:1.5rem; margin-bottom:1rem; color: #000;">
                <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/kaligrafi-nama-icon.jpg" alt="Kaligrafi Nama" style="width:100%; height:100%; border-radius:15px; object-fit:cover;">
            </div>
            <h2 id="kn-modal-title">Kaligrafi Nama</h2>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-top:0.5rem;">Ubah namamu menjadi seni kaligrafi Arab yang indah.</p>
            <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/d2ada7f0-d2dd-4f08-b1ae-51b1c08e26d9">
                <i class="fas fa-play-circle"></i>
                <span>Tonton Tutorial</span>
            </button>
        </div>
        <div class="feature-grid-wrapper">
            <div id="kn-input-section">
                <!-- Input Nama -->
                <div style="margin-bottom: 1.5rem;">
                    <label style="font-size:0.9rem; display:block; margin-bottom: 0.5rem;">Nama Kamu <span style="color:#ff6b6b">*</span></label>
                    <input type="text" id="kn-name-input" style="width:100%; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:10px; padding:15px; color:white; font-family:inherit;" placeholder="Contoh: Aisyah, Muhammad, Rizky...">
                    <p style="font-size: 0.7rem; color: var(--text-muted); margin-top: 5px;">AI akan membuatkan kaligrafi artistik dari nama ini.</p>
                </div>
                <div style="margin-top:auto;">
                    <div id="kn-controls-section" style="margin-bottom: 1rem; background: rgba(255, 255, 255, 0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                        <!-- Ratio Selector -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Rasio Gambar</label>
                            <select id="kn-ratio-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="1:1">Square (1:1) - IG Feed</option>
                                <option value="9:16">Portrait (9:16) - Story/TikTok</option>
                                <option value="16:9">Landscape (16:9) - Banner</option>
                                <option value="3:4">Portrait (3:4) - Standard</option>
                                <option value="4:3">Landscape (4:3) - Wallpaper</option>
                            </select>
                        </div>
                        <!-- Slider Jumlah -->
                        <div style="margin-bottom: 10px;">
                            <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Jumlah Variasi: <span id="kn-count-val" style="color: var(--accent-gold);">1</span></label>
                            <input type="range" id="kn-result-count" min="1" max="4" value="1" style="width: 100%; accent-color: var(--accent-green);">
                        </div>
                    </div>
                    <button id="kn-btn-generate" class="btn-generate">
                        <i class="fas fa-wand-magic-sparkles" style="margin-right:8px;"></i> Buat Kaligrafi
                    </button>
                </div>
            </div> <!-- End of input-section -->
            <!-- Output Area (Loading & Result) -->
            <div id="kn-output-area">
                <!-- Result Card -->
                <div id="kn-result-card" style="position: relative; z-index: 20; background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); height: 100%; display: flex; flex-direction: column;">
                    <h3 style="font-size:1rem; margin-bottom:1rem; flex-shrink: 0;">Hasil Kaligrafi:</h3>
                    <div id="kn-result-content" style="border-radius:12px; overflow:y-auto; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.2); flex: 1; min-height: 0; padding: 10px; display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                        <!-- Empty State Text if no image -->
                        <p class="empty-state-text" style="color: var(--text-muted); text-align: center; padding: 1rem; font-size: 0.9rem; grid-column: 1 / -1;">
                            <i class="fas fa-pen-nib" style="font-size: 2rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
                            Hasil kaligrafi akan muncul di sini. </p>
                    </div>
                    <div style="text-align: right; margin-top: 0.5rem; flex-shrink: 0;">
                        <small style="color: var(--text-muted);">Tekan tahan gambar untuk menyimpan</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- AI Assistant Modal -->
<div id="assistant-modal" class="feature-page hidden">
    <div class="modal-content" style="display: flex; flex-direction: column; height: 100%; max-height: none; padding: 0;">
        <!-- Header -->
        <div style="padding: 0.9rem 1.25rem 0.7rem 1.25rem; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: space-between;">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div class="header-icon-bg" style="width: 38px; height: 38px; background: var(--accent-green); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1rem; color: white;">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/sufi-assistant-icon.jpg" alt="SuFi Assistant" style="width:100%; height:100%; border-radius:10px; object-fit:cover;">
                </div>
                <div>
                    <h2 style="font-size: 1.05rem; margin: 0;">SuFi AI</h2>
                    <p style="font-size: 0.75rem; color: var(--text-muted); margin: 0;">Asisten Cerdas Ramadhan</p>
                </div>
            </div>
            <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 6px;">
                <button id="switch-mode-btn" onclick="switchMode()" class="hidden" style="padding: 5px 10px; border-radius: 18px; border: 1px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.3); color: white; font-size: 0.75rem; cursor: pointer;">
                    <i class="fas fa-exchange-alt" style="margin-right: 5px;"></i> Ganti Mode
                </button>
                <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/3c8f055d-2496-40c7-a82b-f79fbdc6c68c">
                    <i class="fas fa-play-circle"></i>
                    <span>Tonton Tutorial</span>
                </button>
                <button class="close-modal" onclick="closeAssistantModal()" style="position: static; right: auto; left: auto; padding: 6px 10px; font-size: 0.78rem; gap: 6px;"><i class="fas fa-arrow-left"></i> Kembali</button>
            </div>
        </div>
        <!-- Chat Area -->
        <div id="chat-container" style="flex: 1; overflow-y: auto; padding: 1.5rem; display: flex; flex-direction: column; gap: 1rem; scroll-behavior: smooth;">
            <!-- Mode Selection -->
            <div id="mode-selection" style="display: flex; flex-direction: column; gap: 1.5rem; align-items: center; justify-content: center; height: 100%;">
                <div style="text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 1.4rem;">Pilih Mode Percakapan</h3>
                    <p style="margin: 0; color: var(--text-muted); font-size: 0.9rem;">Apa yang ingin kamu lakukan?</p>
                </div>
                <div style="display: grid; grid-template-columns: 1fr; gap: 1rem; width: 100%; max-width: 400px;">
                    <!-- Mode 1: Q&A -->
                    <button onclick="selectMode('chat')" class="mode-card" style="display: flex; align-items: center; gap: 1rem; padding: 1.5rem; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; cursor: pointer; text-align: left; transition: all 0.3s;">
                        <div style="width: 50px; height: 50px; background: rgba(16, 185, 129, 0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #10b981;">
                            <i class="fas fa-comment-alt"></i>
                        </div>
                        <div>
                            <h4 style="margin: 0 0 5px 0; font-size: 1rem; color: white;">Tanya Ramadhan</h4>
                            <p style="margin: 0; font-size: 0.8rem; color: var(--text-muted);">Tanya jawab seputar puasa & ibadah</p>
                        </div>
                    </button>
                    <button onclick="selectMode('voice')" class="mode-card" style="display: flex; align-items: center; gap: 1rem; padding: 1.5rem; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; cursor: pointer; text-align: left; transition: all 0.3s;">
                        <div style="width: 50px; height: 50px; background: rgba(251, 191, 36, 0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #fbbf24;">
                            <i class="fas fa-microphone-alt"></i>
                        </div>
                        <div>
                            <h4 style="margin: 0 0 5px 0; font-size: 1rem; color: white;">Bicara dengan SuFi</h4>
                            <p style="margin: 0; font-size: 0.8rem; color: var(--text-muted);">Aktifkan mic dan dengar jawaban</p>
                        </div>
                    </button>
                    <!-- Mode 2: Image Gen -->
                    <button onclick="selectMode('image')" class="mode-card" style="display: flex; align-items: center; gap: 1rem; padding: 1.5rem; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; cursor: pointer; text-align: left; transition: all 0.3s;">
                        <div style="width: 50px; height: 50px; background: rgba(139, 92, 246, 0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: #8b5cf6;">
                            <i class="fas fa-paint-brush"></i>
                        </div>
                        <div>
                            <h4 style="margin: 0 0 5px 0; font-size: 1rem; color: white;">Buat & Edit Gambar</h4>
                            <p style="margin: 0; font-size: 0.8rem; color: var(--text-muted);">Generate gambar AI & editing foto</p>
                        </div>
                    </button>
                </div>
            </div>
            <div id="voice-ui" class="hidden voice-ui">
                <div class="voice-stack">
                    <div id="voice-orb" class="voice-orb">
                        <div class="voice-orb-core">
                            <button id="voice-mic-btn" class="voice-mic-btn">
                                <i class="fas fa-microphone"></i>
                            </button>
                        </div>
                    </div>
                    <div id="voice-status" class="voice-status is-idle">
                        <span id="voice-status-icon" class="voice-status-icon fas fa-microphone"></span>
                        <span id="voice-status-text">Tekan mic untuk mulai</span>
                    </div>
                </div>
            </div>
            <!-- Chat Messages (Hidden by default) -->
            <div id="chat-messages-container" class="hidden" style="width: 100%;">
                <div id="chat-messages-chat" class="hidden"></div>
                <div id="chat-messages-image" class="hidden"></div>
            </div>
        </div>
        <!-- Input Area -->
        <div id="input-area" class="hidden" style="padding: 1rem; background: rgba(0,0,0,0.2); border-top: 1px solid rgba(255,255,255,0.1);">
            <!-- Image Preview -->
            <div id="chat-image-preview-container" class="hidden" style="margin-bottom: 10px; position: relative; display: inline-block;">
                <img id="chat-image-preview" src="" style="height: 80px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2);">
                <button onclick="clearChatImage()" style="position: absolute; top: -5px; right: -5px; background: #ef4444; color: white; border: none; border-radius: 50%; width: 20px; height: 20px; font-size: 0.7rem; cursor: pointer; display: flex; align-items: center; justify-content: center;"><i class="fas fa-times"></i></button>
            </div>
            <div style="display: flex; gap: 10px; align-items: flex-end;">
                <button id="chat-image-btn" onclick="document.getElementById('chat-file-input').click()" style="width: 45px; height: 45px; border-radius: 12px; background: rgba(255,255,255,0.1); border: none; color: var(--text-muted); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                    <i class="fas fa-image"></i>
                </button>
                <input type="file" id="chat-file-input" hidden accept="image/*">
                <div style="flex: 1; background: rgba(255,255,255,0.1); border-radius: 12px; padding: 5px 10px; display: flex; align-items: center;">
                    <textarea id="chat-input" rows="1" placeholder="Ketik pesan..." style="width: 100%; background: transparent; border: none; color: white; font-family: inherit; font-size: 16px; resize: none; max-height: 100px; padding: 8px 0; outline: none;"></textarea>
                </div>
                <button id="chat-send-btn" onclick="sendChatMessage()" style="width: 45px; height: 45px; border-radius: 12px; background: var(--accent-green); border: none; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
</div>
<style>
    .chat-message {
        display: flex;
        margin-bottom: 0.5rem;
        animation: fadein 0.3s;
    }

    .chat-message.bot {
        justify-content: flex-start;
    }

    .chat-message.user {
        justify-content: flex-end;
    }

    .message-content {
        max-width: 80%;
        padding: 12px 16px;
        border-radius: 16px;
        font-size: 0.95rem;
        line-height: 1.5;
        position: relative;
        word-wrap: break-word;
    }

    .chat-message.bot .message-content {
        background: rgba(255, 255, 255, 0.1);
        color: white;
        border-bottom-left-radius: 4px;
    }

    .chat-message.user .message-content {
        background: var(--accent-green);
        color: white;
        border-bottom-right-radius: 4px;
    }

    .chat-image-attachment {
        max-width: 100%;
        border-radius: 12px;
        margin-top: 8px;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .typing-indicator span {
        display: inline-block;
        width: 6px;
        height: 6px;
        background-color: rgba(255, 255, 255, 0.6);
        border-radius: 50%;
        animation: typing 1.4s infinite ease-in-out both;
        margin: 0 2px;
    }

    .typing-indicator span:nth-child(1) {
        animation-delay: -0.32s;
    }

    .typing-indicator span:nth-child(2) {
        animation-delay: -0.16s;
    }

    @keyframes typing {
        0%, 80%, 100% {
            transform: scale(0);
        }
        40% {
            transform: scale(1);
        }
    }

    .voice-ui {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        min-height: 320px;
    }

    .voice-stack {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 24px;
    }

    .voice-orb {
        position: relative;
        width: 220px;
        height: 220px;
        border-radius: 50%;
        background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.05), rgba(0, 0, 0, 0.3));
        box-shadow: 0 0 40px rgba(251, 191, 36, 0.25), inset 0 0 30px rgba(0, 0, 0, 0.35);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.4s ease, box-shadow 0.4s ease;
    }

    .voice-orb.is-speaking {
        transform: scale(1.05);
        box-shadow: 0 0 60px rgba(251, 191, 36, 0.6), inset 0 0 40px rgba(0, 0, 0, 0.25);
    }

    .voice-orb-core {
        width: 92px;
        height: 92px;
        border-radius: 50%;
        background: rgba(0, 0, 0, 0.35);
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid rgba(255, 255, 255, 0.15);
        box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.4);
    }

    .voice-mic-btn {
        width: 68px;
        height: 68px;
        border-radius: 50%;
        background: rgba(251, 191, 36, 0.9);
        border: none;
        color: #1f1b16;
        font-size: 1.4rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .voice-mic-btn:active {
        transform: scale(0.95);
    }

    .voice-orb.is-listening .voice-mic-btn {
        box-shadow: 0 0 20px rgba(251, 191, 36, 0.8);
    }

    .voice-status {
        display: flex;
        align-items: center;
        gap: 10px;
        color: var(--text-muted);
        font-size: 0.9rem;
        letter-spacing: 0.2px;
    }

    .voice-status-icon {
        width: 24px;
        height: 24px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
        color: #fbbf24;
    }

    .voice-status.is-thinking .voice-status-icon {
        animation: voicePulse 1.4s ease-in-out infinite;
    }

    .voice-status.is-answered .voice-status-icon {
        animation: voiceBounce 1s ease-in-out infinite;
    }

    .voice-status.is-starting .voice-status-icon {
        animation: voiceSpin 1s linear infinite;
    }

    .voice-status.is-speaking .voice-status-icon {
        animation: voicePulse 1s ease-in-out infinite;
    }

    @keyframes voicePulse {
        0%, 100% {
            transform: scale(1);
            opacity: 0.8;
        }
        50% {
            transform: scale(1.25);
            opacity: 1;
        }
    }

    @keyframes voiceBounce {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-4px);
        }
    }

    @keyframes voiceSpin {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    /* Theme Modes */
    .mode-image-theme .chat-message.user .message-content {
        background: #8b5cf6 !important;
    }

    .mode-image-theme #chat-send-btn {
        background: #8b5cf6 !important;
    }

    .mode-voice-theme #voice-mic-btn {
        background: var(--accent-gold) !important;
        color: var(--primary-dark) !important;
    }

    /* Header Icon background in Image Mode - need to target specific element if possible,
       but since it has inline style, we might need JS or !important helper class */
    .mode-image-theme .header-icon-bg {
        background: #8b5cf6 !important;
    }
</style>
<div id="story-modal" class="feature-page hidden">
    <div class="modal-content">
        <button class="close-modal" onclick="closeStoryPosterModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div style="text-align:center; margin-bottom:1.5rem;">
            <div style="width:60px; height:60px; background:var(--accent-green); border-radius:15px; display:inline-flex; align-items:center; justify-content:center; font-size:1.5rem; margin-bottom:1rem;">
                <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/cerita-poster-ramadhan-icon.jpg" alt="Cerita Poster Ramadhan" style="width:100%; height:100%; border-radius:15px; object-fit:cover;">
            </div>
            <h2>Cerita Poster Ramadhan</h2>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-top:0.5rem;">Masukkan ide singkat, AI akan membuat caption dan poster yang siap dibagikan.</p>
            <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/fa53abba-11c4-4eea-9304-39d166dff73b">
                <i class="fas fa-play-circle"></i>
                <span>Tonton Tutorial</span>
            </button>
        </div>
        <div class="feature-grid-wrapper">
            <div id="story-input-section">
                <div style="margin-bottom:0.75rem; background: rgba(255,255,255,0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                    <label style="font-size:0.8rem; display:block; margin-bottom:5px;">Tema Utama <span style="color:#ff6b6b">*</span></label>
                    <input id="story-theme-input" type="text" placeholder="Contoh: Kebersamaan berbuka di kampung" style="width:100%; padding:8px; border-radius:8px; background: rgba(0,0,0,0.3); color:white; border:1px solid rgba(255,255,255,0.1);">
                </div>
                <div style="margin-bottom:0.75rem; background: rgba(255,255,255,0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                    <label style="font-size:0.8rem; display:block; margin-bottom:5px;">Detail Tambahan (Opsional)</label>
                    <textarea id="story-detail-input" rows="3" placeholder="Contoh: ada anak kecil membawa takjil" style="width:100%; padding:8px; border-radius:8px; background: rgba(0,0,0,0.3); color:white; border:1px solid rgba(255,255,255,0.1); resize: vertical;"></textarea>
                </div>
                <div id="story-controls-section" style="margin-bottom: 1rem; background: rgba(255, 255, 255, 0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                    <div style="margin-bottom: 10px;">
                        <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Mood Cerita</label>
                        <select id="story-mood-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                            <option value="Hangat & Penuh Syukur">Hangat</option>
                            <option value="Ceria & Penuh Harapan">Ceria</option>
                            <option value="Reflektif & Menyentuh">Reflektif</option>
                            <option value="Heroik & Menginspirasi">Heroik</option>
                            <option value="Nostalgia Kampung">Nostalgia</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Style Poster</label>
                        <select id="story-style-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                            <option value="Cinematic Photo Realistic">Cinematic Photo</option>
                            <option value="Soft Watercolor Illustration">Watercolor</option>
                            <option value="Minimalist Modern Poster">Minimalist</option>
                            <option value="Vintage Film Look">Vintage Film</option>
                            <option value="Neon Night Market">Neon Night</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Rasio Poster</label>
                        <select id="story-ratio-select" style="width: 100%; padding: 8px; border-radius: 8px; background: rgba(0,0,0,0.3); color: white; border: 1px solid rgba(255,255,255,0.1);">
                            <option value="1:1">Square (1:1)</option>
                            <option value="9:16">Story (9:16)</option>
                            <option value="4:5">Portrait (4:5)</option>
                            <option value="16:9">Landscape (16:9)</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label style="font-size: 0.8rem; display: block; margin-bottom: 5px;">Jumlah Variasi: <span id="story-count-val" style="color: var(--accent-gold);">1</span></label>
                        <input type="range" id="story-result-count" min="1" max="6" value="1" style="width: 100%; accent-color: var(--accent-green);">
                    </div>
                </div>
                <button id="story-btn-generate" class="btn-generate">
                    <i class="fas fa-wand-magic-sparkles" style="margin-right:8px;"></i> Buat Cerita & Poster
                </button>
            </div>
            <div id="story-output-area">
                <div id="story-loading-state" class="hidden" style="text-align:center; padding:1rem 0; height: 100%; display: flex; flex-direction: column; justify-content: center;">
                    <div style="font-size:2rem; color:var(--accent-green); margin-bottom:0.5rem;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <p style="color:var(--text-muted); font-size:0.9rem;">AI sedang menulis cerita & poster...</p>
                </div>
                <div id="story-result-card" style="position: relative; z-index: 20; background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); height: 100%; display: flex; flex-direction: column;">
                    <h3 style="font-size:1rem; margin-bottom:1rem; flex-shrink: 0;">Hasil Cerita:</h3>
                    <div id="story-result-content" style="border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.2); flex: 1; display: flex; align-items: center; justify-content: center; min-height: 0;">
                        <p class="empty-state-text" style="color: var(--text-muted); text-align: center; font-size: 0.9rem;">
                            <i class="fas fa-book-open" style="font-size: 2rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
                            Cerita dan poster akan muncul di sini. </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="quran-modal" class="feature-page hidden">
    <div class="modal-content quran-layout">
        <!-- Header Section -->
        <div class="quran-header">
            <button class="close-modal" onclick="closeQuranModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
            <div class="quran-header-center">
                <div class="quran-icon-box">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/baca-alquran-icon.jpg" alt="Baca Al-Quran" style="width:100%; height:100%; border-radius:14px; object-fit:cover;">
                </div>
                <h2>Baca Al-Quran</h2>
                <p class="quran-subtitle">Tampilan mushaf, lengkap dengan latin dan terjemahan.</p>
                <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/af476c39-c7c7-4922-9cd7-20056a63633f">
                    <i class="fas fa-play-circle"></i>
                    <span>Tonton Tutorial</span>
                </button>
            </div>
        </div>
        <!-- Main Grid Section -->
        <div class="quran-grid">
            <!-- Sidebar (Daftar Surah) -->
            <div class="quran-card quran-sidebar">
                <div class="quran-card-header">
                    <div>
                        <div class="quran-card-title">Daftar Surah</div>
                        <div class="quran-card-subtitle">Pilih surah untuk dibaca</div>
                    </div>
                    <div class="quran-badge">114</div>
                </div>
                <div class="quran-search-box">
                    <i class="fas fa-search"></i>
                    <input id="quran-search-input" type="text" placeholder="Cari nama surah atau nomor">
                </div>
                <div id="quran-surah-list" class="quran-list-container">
                    <div class="quran-empty">Memuat daftar surah...</div>
                </div>
            </div>
            <!-- Content (Isi Surah) -->
            <div class="quran-card quran-content">
                <div class="quran-card-header">
                    <div>
                        <div id="quran-surah-title" class="quran-card-title">Pilih surah</div>
                        <div id="quran-surah-meta" class="quran-card-subtitle">Nama latin, arti, jumlah ayat</div>
                    </div>
                    <div class="quran-nav-controls">
                        <button id="quran-btn-play-full" class="quran-nav-btn" title="Putar Murottal Full"><i class="fas fa-play"></i></button>
                        <button id="quran-btn-prev" class="quran-nav-btn"><i class="fas fa-chevron-left"></i></button>
                        <button id="quran-btn-next" class="quran-nav-btn"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                <div id="quran-loading" class="quran-empty">Memuat ayat...</div>
                <div id="quran-ayah-list" class="quran-list-container hidden"></div>
            </div>
        </div>
    </div>
</div>
<div id="chef-modal" class="feature-page hidden">
    <div class="modal-content">
        <button class="close-modal" onclick="closeChefRamadhanModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div style="text-align:center; margin-bottom:1.5rem;">
            <div style="width:60px; height:60px; background:var(--accent-green); border-radius:15px; display:inline-flex; align-items:center; justify-content:center; font-size:1.5rem; margin-bottom:1rem;">
                <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/chef-ramadhan-icon.jpg" alt="Chef Ramadhan" style="width:100%; height:100%; border-radius:15px; object-fit:cover;">
            </div>
            <h2>Chef Ramadhan</h2>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-top:0.5rem;">Cukup foto isi kulkas atau tulis bahan yang tersedia, AI akan meracik ide menu, resep lengkap, dan visual hidangan yang menggugah selera.</p>
            <button class="tutorial-btn" data-video-src="https://iframe.mediadelivery.net/embed/599424/741ef708-2806-41d9-baf2-1ed3e5b0825a">
                <i class="fas fa-play-circle"></i>
                <span>Tonton Tutorial</span>
            </button>
        </div>
        <div class="feature-grid-wrapper">
            <div id="chef-input-section">
                <div class="drag-area" id="chef-drag-area">
                    <i class="fas fa-camera" style="font-size:2rem; margin-bottom:1rem; color:var(--text-muted);"></i>
                    <p>Foto Isi Kulkas (Opsional)</p>
                    <input type="file" id="chef-file-upload" hidden accept="image/*">
                </div>
                <div id="chef-ingredients-status" style="font-size:0.75rem; color:var(--text-muted); margin-top:-0.5rem; min-height:1.2rem;"></div>
                <div style="margin-top: 0.5rem; background: rgba(255,255,255,0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                    <label style="font-size:0.8rem; display:block; margin-bottom:5px;">Bahan yang Ada</label>
                    <textarea id="chef-ingredients-input" rows="4" placeholder="Contoh: ayam, telur, bawang merah, kecap, cabai" style="width:100%; padding:8px; border-radius:8px; background: rgba(0,0,0,0.3); color:white; border:1px solid rgba(255,255,255,0.1); resize: vertical;"></textarea>
                </div>
                <div style="margin-top:0.75rem; background: rgba(255,255,255,0.03); padding: 10px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);">
                    <label style="font-size:0.8rem; display:block; margin-bottom:5px;">Preferensi Rasa (Opsional)</label>
                    <input id="chef-notes-input" type="text" placeholder="Misal: pedas sedang, tanpa santan" style="width:100%; padding:8px; border-radius:8px; background: rgba(0,0,0,0.3); color:white; border:1px solid rgba(255,255,255,0.1);">
                </div>
                <button id="chef-btn-generate" class="btn-generate">
                    <i class="fas fa-wand-magic-sparkles" style="margin-right:8px;"></i> Buat Resep
                </button>
            </div>
            <div id="chef-output-area">
                <div id="chef-loading-state" class="hidden" style="text-align:center; padding:1rem 0; height: 100%; display: flex; flex-direction: column; justify-content: center;">
                    <div style="font-size:2rem; color:var(--accent-green); margin-bottom:0.5rem;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                    <p style="color:var(--text-muted); font-size:0.9rem;">AI sedang meracik resep...</p>
                </div>
                <div id="chef-result-card" style="position: relative; z-index: 20; background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); height: 100%; display: flex; flex-direction: column;">
                    <h3 style="font-size:1rem; margin-bottom:1rem; flex-shrink: 0;">Hasil Resep AI:</h3>
                    <div id="chef-result-content" style="border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.1); background:rgba(0,0,0,0.2); flex: 1; display: flex; align-items: center; justify-content: center; min-height: 0; padding: 1rem;">
                        <p class="empty-state-text" style="color: var(--text-muted); text-align: center; font-size: 0.9rem;">
                            <i class="fas fa-utensils" style="font-size: 2rem; display: block; margin-bottom: 0.5rem; opacity: 0.5;"></i>
                            Resep dan gambar akan muncul di sini. </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="sholat-modal" class="feature-page hidden">
    <div class="modal-content sholat-modal-content">
        <div class="sholat-hero">
            <button class="close-modal sholat-back-btn" onclick="closeSholatModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
            <div class="sholat-hero-content">
                <div class="sholat-hero-badge">Panduan Ringkas</div>
                <h2 class="sholat-hero-title">Cara Sholat</h2>
                <p class="sholat-hero-subtitle">Gerakan inti disusun jelas, siap dipraktikkan</p>
            </div>
        </div>
        <!-- Tabs -->
        <div class="sholat-tabs" style="display: flex; justify-content: center; gap: 10px; margin: -20px 1.5rem 1.5rem; position: relative; z-index: 10;">
            <button class="tab-btn active" onclick="switchSholatTab('gerakan')" id="tab-gerakan">Gerakan</button>
            <button class="tab-btn" onclick="switchSholatTab('wudhu')" id="tab-wudhu">Wudhu</button>
            <button class="tab-btn" onclick="switchSholatTab('niat')" id="tab-niat">Niat</button>
        </div>
        <!-- Content: Gerakan Sholat (Main Flow) -->
        <div id="content-gerakan" class="sholat-content" style="padding: 0 1.5rem 2rem;">
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <h3 style="font-family: 'Outfit', sans-serif; font-weight: 700; color: #1a5c55; display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <i class="fas fa-star" style="font-size: 0.8rem; color: #f1c40f;"></i> Gerakan Sholat <i class="fas fa-star" style="font-size: 0.8rem; color: #f1c40f;"></i>
                </h3>
            </div>
            <div class="step-card-list sholat-step-list">
                <!-- Step 1 -->
                <div class="step-card">
                    <div class="step-card-content">
                        <div class="step-badge">1</div>
                        <h4 class="step-title">Niat & Takbir</h4>
                        <p class="step-desc">Niat sholat, lalu takbir "Allahu Akbar".</p>
                    </div>
                    <div class="step-card-image">
                        <div class="step-image-wrap">
                            <img class="step-image" data-step="niat-takbir" data-local="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/niat-takbir.jpg" data-prompt="Modern minimal illustration of a muslim performing takbiratul ihram (standing, hands raised). Soft lighting, pastel background, clean style, 3d illustration, full body." alt="Niat dan Takbir" loading="lazy">
                        </div>
                    </div>
                </div>
                <!-- Step 2 -->
                <div class="step-card">
                    <div class="step-card-content">
                        <div class="step-badge">2</div>
                        <h4 class="step-title">Berdiri & Doa</h4>
                        <p class="step-desc">Baca Al-Fatihah & surat pendek.</p>
                    </div>
                    <div class="step-card-image">
                        <div class="step-image-wrap">
                            <img class="step-image" data-step="berdiri-doa" data-local="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/berdiri-doa.jpg" data-prompt="Modern minimal illustration of a muslim standing in qiyam with hands folded on chest, calm expression, soft lighting, pastel background, clean style, 3d illustration, full body." alt="Berdiri dan Doa" loading="lazy">
                        </div>
                    </div>
                </div>
                <!-- Step 3 -->
                <div class="step-card">
                    <div class="step-card-content">
                        <div class="step-badge">3</div>
                        <h4 class="step-title">Ruku'</h4>
                        <p class="step-desc">Ruku' sambil ucapkan "Subhana Rabbiyal Azim".</p>
                    </div>
                    <div class="step-card-image">
                        <div class="step-image-wrap">
                            <img class="step-image" data-step="ruku" data-local="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/ruku.jpg" data-prompt="Modern minimal illustration of a muslim in ruku position (back straight, hands on knees), soft lighting, pastel background, clean style, 3d illustration, full body." alt="Ruku" loading="lazy">
                        </div>
                    </div>
                </div>
                <!-- Step 4 -->
                <div class="step-card">
                    <div class="step-card-content">
                        <div class="step-badge">4</div>
                        <h4 class="step-title">I'tidal</h4>
                        <p class="step-desc">Bangkit, ucap "Sami'allahu liman hamidah".</p>
                    </div>
                    <div class="step-card-image">
                        <div class="step-image-wrap">
                            <img class="step-image" data-step="itidal" data-local="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/itidal.jpg" data-prompt="Modern minimal illustration of a muslim standing in itidal after ruku, hands by sides, soft lighting, pastel background, clean style, 3d illustration, full body." alt="I'tidal" loading="lazy">
                        </div>
                    </div>
                </div>
                <!-- Step 5 -->
                <div class="step-card">
                    <div class="step-card-content">
                        <div class="step-badge">5</div>
                        <h4 class="step-title">Sujud</h4>
                        <p class="step-desc">Sujud sambil ucap "Subhana Rabbiyal A'la".</p>
                    </div>
                    <div class="step-card-image">
                        <div class="step-image-wrap">
                            <img class="step-image" data-step="sujud" data-local="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/sujud.jpg" data-prompt="Modern minimal illustration of a muslim in sujud (prostration), soft lighting, pastel background, clean style, 3d illustration, full body." alt="Sujud" loading="lazy">
                        </div>
                    </div>
                </div>
                <!-- Step 6 -->
                <div class="step-card">
                    <div class="step-card-content">
                        <div class="step-badge">6</div>
                        <h4 class="step-title">Duduk</h4>
                        <p class="step-desc">Duduk diantara dua sujud & Tahiyat.</p>
                    </div>
                    <div class="step-card-image">
                        <div class="step-image-wrap">
                            <img class="step-image" data-step="duduk" data-local="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/duduk.jpg" data-prompt="Modern minimal illustration of a muslim sitting between two sujud (jalsa), hands on thighs, soft lighting, pastel background, clean style, 3d illustration, full body." alt="Duduk di antara dua sujud" loading="lazy">
                        </div>
                    </div>
                </div>
                <!-- Step 7 -->
                <div class="step-card">
                    <div class="step-card-content">
                        <div class="step-badge">7</div>
                        <h4 class="step-title">Salam</h4>
                        <p class="step-desc">Ucap salam ke kanan dan ke kiri.</p>
                    </div>
                    <div class="step-card-image">
                        <div class="step-image-wrap">
                            <img class="step-image" data-step="salam" data-local="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/salam.jpg" data-prompt="Modern minimal illustration of a muslim sitting and turning head to the right for salam, hands on thighs, soft lighting, pastel background, clean style, 3d illustration, full body." alt="Salam" loading="lazy">
                        </div>
                    </div>
                </div>
            </div>
            <div style="margin-top: 1.5rem; text-align: center;">
                <button class="btn-next-step" onclick="switchSholatTab('bacaan-detail')">
                    Lihat Bacaan Lengkap <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
        <!-- Content: Wudhu -->
        <div id="content-wudhu" class="sholat-content hidden" style="padding: 0 1.5rem 2rem;">
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <h3 style="font-family: 'Outfit', sans-serif; font-weight: 700; color: #1a5c55;">Tata Cara Wudhu</h3>
            </div>
            <div class="step-card-list">
                <div class="step-card no-media">
                    <div class="step-card-content">
                        <div class="step-badge">1</div>
                        <h4 class="step-title">Niat & Basmalah</h4>
                        <p class="step-desc">Membaca Bismillah & berniat wudhu.</p>
                    </div>
                </div>
                <div class="step-card no-media">
                    <div class="step-card-content">
                        <div class="step-badge">2</div>
                        <h4 class="step-title">Membasuh Tangan</h4>
                        <p class="step-desc">Basuh kedua telapak tangan 3x.</p>
                    </div>
                </div>
                <div class="step-card no-media">
                    <div class="step-card-content">
                        <div class="step-badge">3</div>
                        <h4 class="step-title">Berkumur & Hidung</h4>
                        <p class="step-desc">Kumur-kumur & basuh hidung 3x.</p>
                    </div>
                </div>
                <div class="step-card no-media">
                    <div class="step-card-content">
                        <div class="step-badge">4</div>
                        <h4 class="step-title">Membasuh Wajah</h4>
                        <p class="step-desc">Basuh seluruh wajah 3x.</p>
                    </div>
                </div>
                <div class="step-card no-media">
                    <div class="step-card-content">
                        <div class="step-badge">5</div>
                        <h4 class="step-title">Membasuh Tangan</h4>
                        <p class="step-desc">Basuh tangan hingga siku 3x.</p>
                    </div>
                </div>
                <div class="step-card no-media">
                    <div class="step-card-content">
                        <div class="step-badge">6</div>
                        <h4 class="step-title">Kepala & Telinga</h4>
                        <p class="step-desc">Usap kepala dan telinga.</p>
                    </div>
                </div>
                <div class="step-card no-media">
                    <div class="step-card-content">
                        <div class="step-badge">7</div>
                        <h4 class="step-title">Membasuh Kaki</h4>
                        <p class="step-desc">Basuh kaki hingga mata kaki 3x.</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Content: Niat -->
        <div id="content-niat" class="sholat-content hidden" style="padding: 0 1.5rem 2rem;">
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <h3 style="font-family: 'Outfit', sans-serif; font-weight: 700; color: #1a5c55;">Niat Sholat Fardhu</h3>
            </div>
            <div class="prayer-card-list">
                <div class="prayer-card-modern">
                    <div class="pcm-header">Subuh (2 Rakaat)</div>
                    <div class="pcm-arabic">اُصَلِّى فَرْضَ الصُّبْحِ رَكْعَتَيْنِ...</div>
                    <div class="pcm-latin">Usholli Fardlon Shubhi...</div>
                </div>
                <div class="prayer-card-modern">
                    <div class="pcm-header">Dzuhur (4 Rakaat)</div>
                    <div class="pcm-arabic">اُصَلِّى فَرْضَ الظُّهْرِ اَرْبَعَ رَكَعَاتٍ...</div>
                    <div class="pcm-latin">Usholli Fardlon Dhuhri...</div>
                </div>
                <div class="prayer-card-modern">
                    <div class="pcm-header">Ashar (4 Rakaat)</div>
                    <div class="pcm-arabic">اُصَلِّى فَرْضَ الْعَصْرِ اَرْبَعَ رَكَعَاتٍ...</div>
                    <div class="pcm-latin">Usholli Fardlol 'Ashri...</div>
                </div>
                <div class="prayer-card-modern">
                    <div class="pcm-header">Maghrib (3 Rakaat)</div>
                    <div class="pcm-arabic">اُصَلِّى فَرْضَ الْمَغْرِبِ ثَلاَثَ رَكَعَاتٍ...</div>
                    <div class="pcm-latin">Usholli Fardlol Maghribi...</div>
                </div>
                <div class="prayer-card-modern">
                    <div class="pcm-header">Isya (4 Rakaat)</div>
                    <div class="pcm-arabic">اُصَلِّى فَرْضَ الْعِشَاءِ اَرْبَعَ رَكَعَاتٍ...</div>
                    <div class="pcm-latin">Usholli Fardlol 'Isyaa-i...</div>
                </div>
            </div>
        </div>
        <!-- Content: Bacaan Detail (Hidden by default, shown via button) -->
        <div id="content-bacaan-detail" class="sholat-content hidden" style="padding: 0 1.5rem 2rem;">
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <h3 style="font-family: 'Outfit', sans-serif; font-weight: 700; color: #1a5c55;">Bacaan Lengkap</h3>
            </div>
            <div class="step-card-list">
                <div class="step-card" style="display:block;">
                    <h4 class="step-title" style="margin-bottom:0.5rem; color:#1a5c55;">Doa Iftitah</h4>
                    <p class="arabic-text-dark">اللهُ أَكْبَرُ كَبِيرًا، وَالْحَمْدُ لِلَّهِ كَثِيرًا...</p>
                    <p class="latin-text-dark">Allaahu akbar kabiroo walhamdulillaahi katsiroo...</p>
                </div>
                <div class="step-card" style="display:block;">
                    <h4 class="step-title" style="margin-bottom:0.5rem; color:#1a5c55;">Al-Fatihah</h4>
                    <p class="arabic-text-dark">بِسْمِ اللّٰهِ الرَّحْمٰنِ الرَّحِيْمِ. اَلْحَمْدُ لِلّٰهِ رَبِّ الْعٰلَمِيْنَ...</p>
                </div>
                <!-- More content can be added here -->
            </div>
            <button class="btn-next-step" onclick="switchSholatTab('gerakan')" style="margin-top:1rem; background:#666;">
                <i class="fas fa-arrow-left"></i> Kembali ke Gerakan
            </button>
        </div>
    </div>
    <style>
        .sholat-modal-content {
            background: #eef2f3;
            color: #1f2937;
            padding: 0;
        }

        .sholat-hero {
            background: linear-gradient(140deg, rgba(15, 28, 46, 0.95), rgba(31, 58, 86, 0.85)), url('https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/cara-sholat-hero.jpg') no-repeat center center/cover;
            padding: 2.4rem 1.5rem 2.2rem;
            border-bottom-left-radius: 28px;
            border-bottom-right-radius: 28px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .sholat-back-btn {
            color: white;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.25);
            padding: 0.45rem 0.9rem;
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
        }

        .sholat-hero-content {
            text-align: center;
            margin-top: 1.2rem;
        }

        .sholat-hero-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 6px 14px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.2);
            font-size: 0.75rem;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 0.6rem;
            backdrop-filter: blur(6px);
        }

        .sholat-hero-title {
            font-family: 'Outfit', sans-serif;
            font-weight: 700;
            font-size: 1.9rem;
            margin-bottom: 0.4rem;
        }

        .sholat-hero-subtitle {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.75);
        }

        .sholat-tabs {
            background: rgba(255, 255, 255, 0.95);
            padding: 6px;
            border-radius: 999px;
            box-shadow: 0 10px 24px rgba(15, 28, 46, 0.12);
            border: 1px solid rgba(15, 28, 46, 0.08);
        }

        .tab-btn {
            background: none;
            border: none;
            color: #64748b;
            padding: 8px 18px;
            font-size: 0.85rem;
            cursor: pointer;
            border-radius: 20px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #1a5c55, #2f9a8a);
            color: white;
            font-weight: 600;
            box-shadow: 0 6px 14px rgba(26, 92, 85, 0.35);
        }

        .step-card-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .step-card {
            background: white;
            border-radius: 18px;
            padding: 1rem;
            display: grid;
            grid-template-columns: 1fr 96px;
            gap: 1rem;
            align-items: center;
            box-shadow: 0 12px 26px rgba(15, 28, 46, 0.08);
            border: 1px solid rgba(15, 28, 46, 0.08);
        }

        .step-card.no-media {
            grid-template-columns: 1fr;
        }

        .step-card-content {
            padding-right: 0;
        }

        .step-badge {
            display: inline-flex;
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #1a5c55, #2f9a8a);
            color: white;
            border-radius: 50%;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            box-shadow: 0 4px 10px rgba(26, 92, 85, 0.25);
        }

        .step-title {
            color: #1a5c55;
            font-size: 1.05rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
            font-family: 'Outfit', sans-serif;
        }

        .step-desc {
            color: #556375;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .step-card-image {
            width: 96px;
            height: 96px;
            flex-shrink: 0;
        }

        .step-image-wrap {
            width: 100%;
            height: 100%;
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #e2e8f0, #f8fafc);
            position: relative;
        }

        .step-image-wrap.loading::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(110deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.1));
            animation: sholat-shimmer 1.2s linear infinite;
        }

        .step-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        @keyframes sholat-shimmer {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }

        .btn-next-step {
            background: linear-gradient(135deg, #1a5c55, #2f9a8a);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 30px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(26, 92, 85, 0.3);
            transition: transform 0.2s;
        }

        .btn-next-step:active {
            transform: scale(0.98);
        }

        .prayer-card-modern {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.8rem;
            border-left: 4px solid #1a5c55;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.03);
        }

        .pcm-header {
            font-weight: 700;
            color: #1a5c55;
            margin-bottom: 0.5rem;
        }

        .pcm-arabic {
            font-family: 'Amiri', serif;
            font-size: 1.2rem;
            color: #333;
            text-align: right;
            margin-bottom: 0.3rem;
        }

        .pcm-latin {
            font-size: 0.8rem;
            color: #888;
            font-style: italic;
        }

        .arabic-text-dark {
            font-family: 'Amiri', serif;
            font-size: 1.4rem;
            color: #333;
            text-align: right;
            line-height: 1.8;
            margin-bottom: 0.5rem;
        }

        .latin-text-dark {
            color: #1a5c55;
            font-size: 0.9rem;
            font-style: italic;
        }
    </style>
</div>
<div id="kiblat-modal" class="feature-page hidden">
    <div class="modal-content" style="background: linear-gradient(rgba(15, 28, 46, 0.85), rgba(15, 28, 46, 0.95)), url('https://images.unsplash.com/photo-1565552645632-d725f8bfc19a?q=80&w=1000&auto=format&fit=crop') no-repeat center center/cover; color: white; padding: 0; display: flex; flex-direction: column; height: 100vh;">
        <!-- Header -->
        <div style="padding: 1.5rem; display: flex; align-items: center; justify-content: flex-start; position: absolute; top: 0; left: 0; right: 0; z-index: 10;">
            <button class="close-modal" onclick="closeKiblatModal()" style="color: white; background: rgba(255,255,255,0.1); box-shadow: 0 2px 10px rgba(0,0,0,0.1); border: 1px solid rgba(255,255,255,0.1);"><i class="fas fa-arrow-left"></i></button>
            <div style="font-weight: 600; color: white; font-size: 1.1rem; font-family: 'Outfit', sans-serif; margin-left: auto; text-align: right;">
                Arah Kiblat
            </div>
        </div>
        <!-- Compass Area -->
        <div style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding-top: 60px; position: relative;">
            <div style="text-align: center; margin-bottom: 3rem;">
                <p id="kiblat-status" style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">Mencari lokasi...</p>
            </div>
            <!-- Compass Circle -->
            <div class="compass-container">
                <div class="compass-outer-ring"></div>
                <div class="compass-dial" id="compass-dial">
                    <div class="compass-mark N">N</div>
                    <div class="compass-mark E">E</div>
                    <div class="compass-mark S">S</div>
                    <div class="compass-mark W">W</div>
                    <!-- Kiblat Pointer (Independent of Dial Rotation in Logic, but visually inside) -->
                    <!-- We will separate pointer from dial in JS logic to handle rotation properly -->
                </div>
                <!-- Independent Pointer Container -->
                <div class="pointer-container" id="pointer-container">
                    <div class="qibla-pointer" id="qibla-pointer">
                        <div class="kaaba-icon-small">
                            <i class="fas fa-kaaba"></i>
                        </div>
                    </div>
                </div>
                <div class="compass-center"></div>
            </div>
            <div style="margin-top: 3rem; text-align: center;">
                <div id="qibla-degree" style="font-size: 2.5rem; font-weight: 700; color: var(--accent-gold);">0°</div>
                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7); margin-top: 5px;">Jarak ke Ka'bah: <span id="qibla-distance" style="color: white;">-- km</span></div>
            </div>
            <button id="btn-request-location" onclick="requestLocationPermission()" style="margin-top: 1.5rem; background: rgba(255,255,255,0.15); color: white; border: 1px solid rgba(255,255,255,0.25); padding: 12px 24px; border-radius: 30px; font-size: 0.9rem; font-weight: 600; cursor: pointer; display: none; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25);">
                Aktifkan Lokasi
            </button>
            <button id="btn-request-permission" onclick="requestCompassPermission()" style="margin-top: 1.5rem; background: var(--accent-gold); color: #0f1c2e; border: none; padding: 12px 24px; border-radius: 30px; font-size: 0.9rem; font-weight: 600; cursor: pointer; display: none; box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);">
                Izinkan Kompas
            </button>
        </div>
    </div>
    <style>
        .compass-container {
            width: 280px;
            height: 280px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .compass-outer-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px dashed rgba(255, 255, 255, 0.2);
            /* Tick marks look */
            background: repeating-conic-gradient(
                from 0deg,
                transparent 0deg 8deg,
                rgba(255, 255, 255, 0.05) 8deg 10deg
            );
            mask-image: radial-gradient(transparent 65%, black 65%);
            -webkit-mask-image: radial-gradient(transparent 65%, black 65%);
        }

        .compass-dial {
            width: 80%;
            height: 80%;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s linear; /* Smooth linear for realtime */
        }

        /* Decorative center pattern */
        .compass-dial::before {
            content: '';
            position: absolute;
            width: 65%;
            height: 65%;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background-image: radial-gradient(circle at center, var(--accent-gold) 1px, transparent 2px),
            repeating-conic-gradient(from 0deg, transparent 0deg 10deg, rgba(251, 191, 36, 0.05) 10deg 20deg);
        }

        .compass-mark {
            position: absolute;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9rem;
        }

        .compass-mark.N {
            top: 15px;
            color: #ef4444;
            text-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
        }

        .compass-mark.E {
            right: 15px;
        }

        .compass-mark.S {
            bottom: 15px;
            color: white;
        }

        .compass-mark.W {
            left: 15px;
        }

        .compass-center {
            position: absolute;
            width: 16px;
            height: 16px;
            background: var(--accent-gold);
            border-radius: 50%;
            z-index: 10;
            box-shadow: 0 0 0 4px rgba(251, 191, 36, 0.2), 0 0 15px rgba(251, 191, 36, 0.5);
        }

        .pointer-container {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 5;
        }

        .qibla-pointer {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            transition: transform 0.1s linear; /* Smooth linear */
        }

        .qibla-pointer::after {
            content: '';
            position: absolute;
            top: 18%; /* Point inward */
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 32%;
            background: linear-gradient(to top, var(--accent-gold), #f59e0b);
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.4);
        }

        .kaaba-icon-small {
            position: absolute;
            top: 8%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent-gold);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            z-index: 4;
            color: #0f1c2e;
            font-size: 16px;
            border: 2px solid white;
        }
    </style>
</div>
<div id="chat-group-modal" class="feature-page hidden">
    <div class="modal-content" style="display: flex; flex-direction: column; height: 100%; max-height: none; padding: 0;">
        <div id="group-chat-name-entry" class="chat-group-entry hidden">
            <div class="chat-group-entry-icon">
                <i class="fas fa-users"></i>
            </div>
            <h3>Selamat Datang di Chat Group</h3>
            <p>Masukkan username dan provinsi untuk ikut berdiskusi.</p>
            <form id="group-chat-name-form" class="chat-group-entry-form">
                <input type="text" id="group-chat-name-input" placeholder="Username (tanpa spasi)..." required minlength="3" maxlength="20" autocomplete="off">
                <select id="group-chat-province-input" required>
                    <option value="" disabled selected>Pilih Provinsi Anda...</option>
                </select>
                <p id="name-validation-error" class="chat-group-error"></p>
                <button type="submit" class="chat-group-entry-btn">
                    <span>Gabung Chat</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </form>
        </div>
        <div id="group-chat-interface" class="chat-group-interface hidden">
            <div class="chat-group-backbar">
                <button class="chat-group-back-btn" type="button" onclick="window.closeFeaturePage('chat-group-modal')">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali</span>
                </button>
            </div>
            <div class="chat-group-topbar">
                <div class="chat-group-avatar">
                    <i class="fas fa-users"></i>
                </div>
                <div class="chat-group-topbar-info">
                    <div class="chat-group-title-row">
                        <h3>Chat Group</h3>
                        <div class="chat-group-online">
                            <span class="chat-group-dot"></span>
                            <span id="online-count">0</span> online
                        </div>
                    </div>
                    <p id="group-chat-welcome-user" class="chat-group-welcome">Memuat...</p>
                </div>
                <button id="online-users-list-btn" class="chat-group-online-btn" type="button" title="Lihat pengguna online">
                    <i class="fas fa-eye"></i>
                </button>
                <button id="banned-users-list-btn" class="chat-group-online-btn hidden" type="button" title="Lihat pengguna dibanned">
                    <i class="fas fa-ban"></i>
                </button>
                <button id="group-chat-logout-btn" class="chat-group-logout" type="button" title="Keluar & Ganti Nama">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
            <div id="group-chat-history" class="chat-group-history"></div>
            <div class="chat-group-footer">
                <div id="reply-preview-container" class="reply-preview-container">
                    <div class="reply-preview-content">
                        <div id="reply-preview-user" class="reply-preview-user"></div>
                        <div id="reply-preview-text" class="reply-preview-text"></div>
                    </div>
                    <button type="button" id="reply-preview-close" class="reply-preview-close">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="group-chat-form" class="chat-group-form">
                    <input type="text" id="group-chat-input" placeholder="Ketik pesan..." autocomplete="off">
                    <button type="button" id="group-chat-join-btn" class="chat-group-join-btn hidden">Masuk Chat Group</button>
                    <div class="chat-group-form-actions" style="display: flex; align-items: center; gap: 0.5rem; flex-shrink: 0;">
                        <button type="submit" id="group-chat-send-btn" class="chat-group-send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                        <label id="group-chat-filter-toggle-wrap" class="chat-group-filter-toggle-wrap hidden">
                            <span class="toggle-switch vertical" style="transform: scale(0.75);">
                                <input type="checkbox" id="group-chat-filter-toggle" checked>
                                <span class="slider"></span>
                            </span>
                        </label>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div id="online-users-modal" class="chat-group-modal">
    <div class="chat-group-modal-content">
        <div class="chat-group-modal-header">
            <span><i class="fas fa-users"></i> Pengguna Online Chat</span>
            <button id="online-users-modal-close" class="chat-group-modal-close" type="button">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="online-users-list" class="chat-group-modal-list">
            <p class="chat-group-modal-empty">Memuat...</p>
        </div>
    </div>
</div>
<div id="banned-users-modal" class="chat-group-modal">
    <div class="chat-group-modal-content">
        <div class="chat-group-modal-header">
            <span><i class="fas fa-ban"></i> Pengguna Banned</span>
            <button id="banned-users-modal-close" class="chat-group-modal-close" type="button">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="banned-users-list" class="chat-group-modal-list">
            <p class="chat-group-modal-empty">Memuat...</p>
        </div>
    </div>
</div>
<div id="online-info-modal" class="chat-group-modal">
    <div class="chat-group-modal-content">
        <div class="chat-group-modal-header">
            <span><i class="fas fa-users"></i> Pengguna Online</span>
            <button id="online-info-modal-close" class="chat-group-modal-close" type="button">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="online-info-modal-list" class="chat-group-modal-list">
            <p class="chat-group-modal-empty">Memuat...</p>
        </div>
    </div>
</div>
<div id="all-features-modal" class="feature-page hidden">
    <div class="modal-content">
        <button class="close-modal" onclick="window.closeFeaturePage('all-features-modal')"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div class="feature-menu-header">
            <h2>Semua Fitur</h2>
            <p>Pilih fitur untuk mulai menggunakan</p>
        </div>
        <div class="feature-menu-grid">
            <div class="feature-menu-card" onclick="openQuranModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/baca-alquran-icon.jpg" alt="Baca Al~Quran">
                </div>
                <div class="feature-menu-label">Baca Al-Quran</div>
            </div>
            <div class="feature-menu-card" onclick="openSholatModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/cara-sholat-icon.jpg" alt="Cara Sholat">
                </div>
                <div class="feature-menu-label">Bacaan Sholat</div>
            </div>
            <div class="feature-menu-card" onclick="openKiblatModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/arah-kiblat-icon.jpg" alt="Arah Kiblat">
                </div>
                <div class="feature-menu-label">Arah Kiblat</div>
            </div>
            <div class="feature-menu-card" onclick="openAssistantModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/sufi-assistant-icon.jpg" alt="SuFi Assistant">
                </div>
                <div class="feature-menu-label">SuFi Assistant</div>
            </div>
            <div class="feature-menu-card" onclick="openFotoRamadhanModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-ramadhan-icon.jpg" alt="Foto Ramadhan">
                </div>
                <div class="feature-menu-label">Foto Ramadhan</div>
            </div>
            <div class="feature-menu-card" onclick="openFotoUcapanPuasaModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-ucapan-awal-puasa-icon.jpg" alt="Foto Ucapan Awal Puasa">
                </div>
                <div class="feature-menu-label">Ucapan Puasa</div>
            </div>
            <div class="feature-menu-card" onclick="openFotoUcapanLebaranModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-ucapan-lebaran-icon.jpg" alt="Foto Ucapan Lebaran">
                </div>
                <div class="feature-menu-label">Ucapan Lebaran</div>
            </div>
            <div class="feature-menu-card" onclick="openFotoProdukRamadhanModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-produk-ramadhan-icon.jpg" alt="Foto Produk Ramadhan">
                </div>
                <div class="feature-menu-label">Foto Produk</div>
            </div>
            <div class="feature-menu-card" onclick="openFotoFashionRamadhanModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/foto-fashion-ramadhan-icon.jpg" alt="Foto Fashion Ramadhan">
                </div>
                <div class="feature-menu-label">Foto Fashion</div>
            </div>
            <div class="feature-menu-card" onclick="openStoryPosterModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/cerita-poster-ramadhan-icon.jpg" alt="Cerita Poster Ramadhan">
                </div>
                <div class="feature-menu-label">Cerita Poster</div>
            </div>
            <div class="feature-menu-card" onclick="openChefRamadhanModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/chef-ramadhan-icon.jpg" alt="Chef Ramadhan">
                </div>
                <div class="feature-menu-label">Chef Ramadhan</div>
            </div>
            <div class="feature-menu-card" onclick="openAvatarMuslimModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/sticker-muslim-icon.jpg" alt="Sticker Muslim">
                </div>
                <div class="feature-menu-label">Avatar Muslim</div>
            </div>
            <div class="feature-menu-card" onclick="openBusanaMuslimModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/busana-muslim-icon.jpg" alt="Busana Muslim">
                </div>
                <div class="feature-menu-label">Busana Muslim</div>
            </div>
            <div class="feature-menu-card" onclick="openQuoteIslamiModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/quote-islami-icon.jpg" alt="Template Quote Islami">
                </div>
                <div class="feature-menu-label">Quote Islami</div>
            </div>
            <div class="feature-menu-card" onclick="openKaligrafiNamaModal()">
                <div class="feature-menu-icon">
                    <img src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/kaligrafi-nama-icon.jpg" alt="Kaligrafi Nama">
                </div>
                <div class="feature-menu-label">Kaligrafi Nama</div>
            </div>
        </div>
    </div>
</div>
<!-- Image Preview Modal (Global) -->
<div id="image-preview-modal" class="feature-page hidden" style="z-index: 3000; background: rgba(0,0,0,0.9);">
    <div class="modal-content" style="position: relative; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; border-radius: 0;">
        <button id="preview-prev" onclick="window.previewPrev()" style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); width: 44px; height: 44px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.35); color: white; display: inline-flex; align-items: center; justify-content: center; cursor: pointer;">
            <i class="fas fa-chevron-left"></i>
        </button>
        <img id="preview-image-content" src="" style="max-width: 90%; max-height: 90%; object-fit: contain; border-radius: 8px;">
        <button id="preview-next" onclick="window.previewNext()" style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); width: 44px; height: 44px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.35); color: white; display: inline-flex; align-items: center; justify-content: center; cursor: pointer;">
            <i class="fas fa-chevron-right"></i>
        </button>
        <button class="close-modal" onclick="window.closeImagePreview()"><i class="fas fa-arrow-left"></i> Kembali</button>
    </div>
</div>
<div id="video-modal-backdrop">
    <div id="video-modal-content-wrapper"></div>
</div>
<!-- Prayer Schedule Modal -->
<!-- Prayer Schedule Modal -->
<div id="prayer-modal" class="feature-page hidden">
    <div class="modal-content" style="min-height: 50vh;">
        <button class="close-modal" onclick="closePrayerModal()"><i class="fas fa-arrow-left"></i> Kembali</button>
        <div style="text-align:center; margin-bottom:1.5rem;">
            <h2 style="font-size: 1.5rem; font-weight: 600;">Jadwal Sholat</h2>
            <p id="prayer-location-modal" style="color:var(--text-muted); font-size:0.9rem;">Mendeteksi lokasi...</p>
            <div style="margin:0.6rem auto 0; max-width:320px; text-align:left;">
                <label style="font-size:0.75rem; display:block; margin-bottom:6px; color:var(--text-muted);">Pilih lokasi manual</label>
                <select id="prayer-location-select" style="width:100%; padding:8px; border-radius:8px; background:rgba(0,0,0,0.3); color:white; border:1px solid rgba(255,255,255,0.1);">
                    <option value="auto">Gunakan GPS (Otomatis)</option>
                    <option value="Jakarta">Jakarta, DKI Jakarta</option>
                    <option value="Bandung">Bandung, Jawa Barat</option>
                    <option value="Surabaya">Surabaya, Jawa Timur</option>
                    <option value="Medan">Medan, Sumatera Utara</option>
                    <option value="Makassar">Makassar, Sulawesi Selatan</option>
                    <option value="Yogyakarta">Yogyakarta, DI Yogyakarta</option>
                    <option value="Semarang">Semarang, Jawa Tengah</option>
                    <option value="Denpasar">Denpasar, Bali</option>
                    <option value="Balikpapan">Balikpapan, Kalimantan Timur</option>
                    <option value="Pontianak">Pontianak, Kalimantan Barat</option>
                    <option value="Banjarmasin">Banjarmasin, Kalimantan Selatan</option>
                    <option value="Palembang">Palembang, Sumatera Selatan</option>
                    <option value="Manado">Manado, Sulawesi Utara</option>
                    <option value="Padang">Padang, Sumatera Barat</option>
                    <option value="Pekanbaru">Pekanbaru, Riau</option>
                    <option value="Malang">Malang, Jawa Timur</option>
                    <option value="Bogor">Bogor, Jawa Barat</option>
                    <option value="custom">Ketik lokasi sendiri</option>
                </select>
                <input type="text" id="prayer-location-custom" class="hidden" placeholder="Contoh: Sleman, DIY" style="width:100%; margin-top:6px; padding:8px; border-radius:8px; background:rgba(0,0,0,0.3); color:white; border:1px solid rgba(255,255,255,0.1);">
                <button id="prayer-location-apply" type="button" style="width:100%; margin-top:8px; padding:8px; border-radius:10px; border:none; background:var(--accent-green); color:#0b1220; font-weight:600; cursor:pointer;">Gunakan Lokasi Ini</button>
            </div>
            <p style="color:var(--accent-green); font-size:0.8rem; margin-top:0.2rem;" id="current-date-modal"></p>
        </div>
        <div style="display: flex; flex-direction: column; gap: 1rem;">
            <!-- Prayer Item -->
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 12px;">
                <span style="font-weight: 500;">Imsak</span>
                <span id="prayer-imsak-modal" style="font-weight: 600; color: var(--accent-gold);">--:--</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 12px; border-left: 3px solid var(--accent-green);">
                <span style="font-weight: 500;">Subuh</span>
                <span id="prayer-subuh-modal" style="font-weight: 600; color: var(--accent-green);">--:--</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 12px;">
                <span style="font-weight: 500;">Terbit</span>
                <span id="prayer-terbit-modal" style="font-weight: 600; color: var(--text-muted);">--:--</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 12px;">
                <span style="font-weight: 500;">Dhuha</span>
                <span id="prayer-dhuha-modal" style="font-weight: 600;">--:--</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 12px;">
                <span style="font-weight: 500;">Dzuhur</span>
                <span id="prayer-dzuhur-modal" style="font-weight: 600;">--:--</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 12px;">
                <span style="font-weight: 500;">Ashar</span>
                <span id="prayer-ashar-modal" style="font-weight: 600;">--:--</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 12px;">
                <span style="font-weight: 500;">Maghrib</span>
                <span id="prayer-maghrib-modal" style="font-weight: 600; color: var(--accent-gold);">--:--</span>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 12px;">
                <span style="font-weight: 500;">Isya</span>
                <span id="prayer-isya-modal" style="font-weight: 600;">--:--</span>
            </div>
        </div>
    </div>
</div>
<div class="floating-audio-player" id="floating-audio-player" aria-label="Player Musik Sulap Fitri">
    <button class="audio-mini-trigger" id="audio-mini-trigger" type="button" aria-label="Buka player musik">
        <i class="fas fa-music"></i>
        <div class="audio-eq-mini" aria-hidden="true">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </button>
    <div class="floating-audio-body">
        <div class="floating-audio-main">
            <button class="audio-control-btn" id="audio-control-btn" type="button" aria-label="Putar musik">
                <i class="fas fa-play"></i>
            </button>
            <div class="audio-meta">
                <div class="floating-audio-title">Sulap Fitri</div>
                <div class="floating-audio-subtitle" id="audio-status-text">Siap diputar</div>
            </div>
            <div class="audio-eq" aria-hidden="true">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
            <button class="audio-collapse-btn" id="audio-collapse-btn" type="button" aria-label="Sembunyikan player">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <div class="audio-volume">
            <i class="fas fa-volume-up" id="audio-volume-icon" aria-hidden="true"></i>
            <input class="audio-volume-range" id="audio-volume-range" type="range" min="0" max="1" step="0.01" value="0.7" aria-label="Volume musik">
        </div>
    </div>
    <audio id="floating-audio" preload="metadata">
        <source src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/055 Ar Rahman.mp3" type="audio/mpeg">
        <source src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/sulapfitri.mp3" type="audio/mpeg">
        <source src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/012 Yusuf.mp3" type="audio/mpeg">
        <source src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/sulapfitri.mp3" type="audio/mpeg">
        <source src="https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/004 An Nisa.mp3" type="audio/mpeg">
        Browser Anda tidak mendukung audio.
    </audio>
</div>
<script>
    window.APP_NAME = 'Magic Fitri';
    window.APP_LOGO = 'https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@main/assets/magicfitri.png';
    window.MODE_ENDPOINT = 'FRONTEND'; /* FRONTEND or OTHER */
    window.API_KEY = 'sulapfotokeybyichsanlabs';
    window.MONITOR_URL = 'https://api.sulapfoto.fun,https://api.sulapfoto.com,https://api.sulapvideo.com,https://sg.sulapfoto.com,https://canada.sulapfoto.com,https://srv1351382.hstgr.cloud,https://id.vprompter.com';
    window.BASE_URL = (window.location.origin + window.location.pathname).replace(/index\.(html|php)$/i, '') + 'server';
    window.BANNED_EMAIL = 'ikhsan.cyb3r@gmail.com';
    window.PARAREL_GENERATE = 'TRUE';
    window.IS_VIP_APP = true;
    window.inGemini = () => {
        try {
            return window.top.location.href.includes('gemini');
        } catch (e) {
            return true;
        }
    }
    window.CDN = window.inGemini() ? 'https://cdn.jsdelivr.net/gh/karyawaktuluang/magic.fitri@e3e92f5f7b6826bdf872e0286a833012c1dcace9/' : '';
    Promise.all([
        `${CDN}js/assistant.js?v=1771491535`,
        `${CDN}js/script.js?v=1771491535`,
        `${CDN}js/chat-group.js?v=1771491535`,
        `${CDN}js/chef-ramadhan.js?v=1771491535`,
        `${CDN}js/avatar-muslim.js?v=1771491535`,
        `${CDN}js/busana-muslim.js?v=1771491535`,
        `${CDN}js/assistant.js?v=1771491535`,
        `${CDN}js/cerita-poster-ramadhan.js?v=1771491536`,
        `${CDN}js/baca-alquran.js?v=1771491535`,
        `${CDN}js/bacaan-sholat.js?v=1771491535`,
        `${CDN}js/arah-kiblat.js?v=1771491535`,
        `${CDN}js/foto-ramadhan.js?v=1771491535`,
        `${CDN}js/foto-ucapan-puasa.js?v=1771491535`,
        `${CDN}js/foto-ucapan-lebaran.js?v=1771491535`,
        `${CDN}js/foto-produk-ramadhan.js?v=1771491535`,
        `${CDN}js/foto-fashion-ramadhan.js?v=1771491536`,
        `${CDN}js/quote-islami.js?v=1771491536`,
        `${CDN}js/kaligrafi-nama.js?v=1771491535`,
        `${CDN}js/pwa.js?v=1771491536`,
    ].map((url) => {
        return new Promise((resolve, reject) => {
            const script = document.createElement('script');
            script.src = url;
            script.onload = () => resolve(url);
            script.onerror = () => reject(new Error(`Error load script: ${url}`));
            document.head.appendChild(script);
        });
    }))
    .then(() => console.log('All file JavaScript loaded'))
    .catch((error) => console.error(error));
</script>
<!-- PWA Install Popup -->
<div id="pwa-install-modal:patch" class="hidden" style="position:fixed;inset:0;z-index:9990;">
    <div id="pwa-install-backdrop" style="position:fixed;inset:0;background:rgba(10,18,32,0.75);backdrop-filter:blur(12px);"></div>
    <div style="position:relative;min-height:100vh;min-height:100dvh;display:flex;align-items:center;justify-content:center;padding:1.5rem;">
        <div class="pwa-card" style="width:100%;max-width:420px;border-radius:24px;overflow:hidden;border:1px solid rgba(255,255,255,0.1);box-shadow:0 30px 80px rgba(0,0,0,0.5);background:linear-gradient(160deg,#162447 0%,#0f1c2e 100%);transform:translateY(30px) scale(0.95);opacity:0;transition:transform 0.4s cubic-bezier(0.22,0.8,0.28,1),opacity 0.35s ease;">
            <!-- Header -->
            <div style="padding:1.5rem 1.5rem 1rem;background:linear-gradient(135deg,rgba(55,176,137,0.15),rgba(251,191,36,0.1));border-bottom:1px solid rgba(255,255,255,0.08);">
                <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:1rem;">
                    <div style="display:flex;align-items:center;gap:0.75rem;">
                        <div style="width:46px;height:46px;border-radius:14px;background:linear-gradient(135deg,var(--accent-green),var(--accent-gold));display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px rgba(55,176,137,0.3);">
                            <i class="fas fa-mobile-alt" style="font-size:1.2rem;color:white;"></i>
                        </div>
                        <div>
                            <h3 style="font-size:1.15rem;font-weight:700;margin:0;color:white;">Pasang Sulap Fitri</h3>
                            <p style="font-size:0.75rem;color:var(--text-muted);margin:4px 0 0;">Akses cepat di perangkatmu</p>
                        </div>
                    </div>
                    <button id="pwa-close-btn" style="width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.12);color:white;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background 0.2s;">
                        <i class="fas fa-times" style="font-size:0.85rem;"></i>
                    </button>
                </div>
            </div>
            <!-- Body -->
            <div style="padding:1.25rem 1.5rem;">
                <div id="pwa-section-prompt" style="margin-bottom:0.5rem;">
                    <div style="display:flex;align-items:flex-start;gap:0.6rem;font-size:0.85rem;color:rgba(255,255,255,0.8);line-height:1.5;">
                        <i class="fas fa-bolt" style="color:var(--accent-gold);margin-top:3px;font-size:0.8rem;"></i>
                        <span>Instal sekali, buka lebih cepat langsung dari layar utama — tanpa browser!</span>
                    </div>
                </div>
                <div id="pwa-section-ios" class="hidden">
                    <div style="font-size:0.75rem;font-weight:700;color:var(--accent-gold);margin-bottom:0.75rem;text-transform:uppercase;letter-spacing:0.05em;">Cara instal di iPhone/iPad</div>
                    <div style="display:flex;flex-direction:column;gap:0.65rem;">
                        <div style="display:flex;align-items:flex-start;gap:0.65rem;">
                            <span style="flex-shrink:0;width:24px;height:24px;border-radius:50%;background:rgba(55,176,137,0.15);color:var(--accent-green);display:flex;align-items:center;justify-content:center;font-size:0.65rem;font-weight:700;">1</span>
                            <span style="font-size:0.82rem;color:rgba(255,255,255,0.8);line-height:1.4;">Tap ikon <strong style="color:white;">Bagikan</strong> <i class="fas fa-share-square" style="font-size:0.75rem;color:var(--accent-green);"></i> di Safari.</span>
                        </div>
                        <div style="display:flex;align-items:flex-start;gap:0.65rem;">
                            <span style="flex-shrink:0;width:24px;height:24px;border-radius:50%;background:rgba(55,176,137,0.15);color:var(--accent-green);display:flex;align-items:center;justify-content:center;font-size:0.65rem;font-weight:700;">2</span>
                            <span style="font-size:0.82rem;color:rgba(255,255,255,0.8);line-height:1.4;">Pilih <strong style="color:white;">Tambahkan ke Layar Utama</strong>.</span>
                        </div>
                        <div style="display:flex;align-items:flex-start;gap:0.65rem;">
                            <span style="flex-shrink:0;width:24px;height:24px;border-radius:50%;background:rgba(55,176,137,0.15);color:var(--accent-green);display:flex;align-items:center;justify-content:center;font-size:0.65rem;font-weight:700;">3</span>
                            <span style="font-size:0.82rem;color:rgba(255,255,255,0.8);line-height:1.4;">Tap <strong style="color:white;">Tambah</strong> untuk menyimpan aplikasi.</span>
                        </div>
                    </div>
                </div>
                <div id="pwa-section-android" class="hidden">
                    <div style="font-size:0.75rem;font-weight:700;color:var(--accent-gold);margin-bottom:0.75rem;text-transform:uppercase;letter-spacing:0.05em;">Cara instal di Android</div>
                    <div style="display:flex;flex-direction:column;gap:0.65rem;">
                        <div style="display:flex;align-items:flex-start;gap:0.65rem;">
                            <span style="flex-shrink:0;width:24px;height:24px;border-radius:50%;background:rgba(55,176,137,0.15);color:var(--accent-green);display:flex;align-items:center;justify-content:center;font-size:0.65rem;font-weight:700;">1</span>
                            <span style="font-size:0.82rem;color:rgba(255,255,255,0.8);line-height:1.4;">Tap menu <i class="fas fa-ellipsis-v" style="font-size:0.75rem;color:var(--accent-green);"></i> di browser.</span>
                        </div>
                        <div style="display:flex;align-items:flex-start;gap:0.65rem;">
                            <span style="flex-shrink:0;width:24px;height:24px;border-radius:50%;background:rgba(55,176,137,0.15);color:var(--accent-green);display:flex;align-items:center;justify-content:center;font-size:0.65rem;font-weight:700;">2</span>
                            <span style="font-size:0.82rem;color:rgba(255,255,255,0.8);line-height:1.4;">Pilih <strong style="color:white;">Instal aplikasi</strong> atau <strong style="color:white;">Tambahkan ke layar utama</strong>.</span>
                        </div>
                        <div style="display:flex;align-items:flex-start;gap:0.65rem;">
                            <span style="flex-shrink:0;width:24px;height:24px;border-radius:50%;background:rgba(55,176,137,0.15);color:var(--accent-green);display:flex;align-items:center;justify-content:center;font-size:0.65rem;font-weight:700;">3</span>
                            <span style="font-size:0.82rem;color:rgba(255,255,255,0.8);line-height:1.4;">Tap <strong style="color:white;">Instal</strong> untuk menyimpan.</span>
                        </div>
                    </div>
                </div>
                <div id="pwa-section-desktop" class="hidden">
                    <div style="font-size:0.75rem;font-weight:700;color:var(--accent-gold);margin-bottom:0.75rem;text-transform:uppercase;letter-spacing:0.05em;">Cara instal di Desktop</div>
                    <div style="display:flex;flex-direction:column;gap:0.65rem;">
                        <div style="display:flex;align-items:flex-start;gap:0.65rem;">
                            <i class="fas fa-laptop" style="color:var(--accent-green);margin-top:2px;font-size:0.85rem;"></i>
                            <span style="font-size:0.82rem;color:rgba(255,255,255,0.8);line-height:1.4;">Klik ikon instal <i class="fas fa-download" style="font-size:0.7rem;"></i> di sisi kanan address bar (Chrome/Edge).</span>
                        </div>
                        <div style="display:flex;align-items:flex-start;gap:0.65rem;">
                            <i class="fas fa-bars" style="color:var(--accent-green);margin-top:2px;font-size:0.85rem;"></i>
                            <span style="font-size:0.82rem;color:rgba(255,255,255,0.8);line-height:1.4;">Atau buka menu browser lalu pilih <strong style="color:white;">Instal Sulap Fitri</strong>.</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Footer -->
            <div style="padding:0 1.5rem 1.5rem;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:0.6rem;">
                <div style="display:flex;align-items:center;gap:0.5rem;">
                    <button id="pwa-install-btn" style="padding:0.6rem 1.25rem;border-radius:999px;border:none;background:linear-gradient(135deg,var(--accent-green),rgba(55,176,137,0.8));color:white;font-size:0.8rem;font-weight:700;cursor:pointer;box-shadow:0 4px 15px rgba(55,176,137,0.3);transition:transform 0.2s,box-shadow 0.2s;">
                        Instal Sekarang
                    </button>
                    <button id="pwa-dismiss-btn" style="padding:0.55rem 1rem;border-radius:999px;border:1px solid rgba(255,255,255,0.15);background:transparent;color:var(--text-muted);font-size:0.78rem;font-weight:600;cursor:pointer;transition:background 0.2s;">
                        Nanti
                    </button>
                </div>
                <button id="pwa-never-btn" style="padding:0.4rem 0.6rem;border:none;background:transparent;color:rgba(255,255,255,0.3);font-size:0.7rem;font-weight:600;cursor:pointer;transition:color 0.2s;">
                    Jangan tampilkan lagi
                </button>
            </div>
        </div>
    </div>
</div>
<style>
    .pwa-card-visible {
        transform: translateY(0) scale(1) !important;
        opacity: 1 !important;
    }

    #pwa-close-btn:hover {
        background: rgba(255, 255, 255, 0.15);
    }

    #pwa-install-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 6px 20px rgba(55, 176, 137, 0.4);
    }

    #pwa-dismiss-btn:hover {
        background: rgba(255, 255, 255, 0.06);
    }

    #pwa-never-btn:hover {
        color: rgba(255, 255, 255, 0.6);
    }
</style>
</body>
</html>
